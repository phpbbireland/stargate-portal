<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--NOTICE: Please open this file in your web browser. If presented with a security warning, you may safely tell it to allow the blocked content.-->
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD.\nAlthough MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD.\nNo support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<license><![CDATA[http://opensource.org/licenses/gpl-license.php GNU General Public License v2]]></license>
		<title lang="en"><![CDATA[Stargate Portal (aka Kiss Portal)]]></title>
		<description lang="en"><![CDATA[An advanced, fully integrated, portal for phpBB 3.0.9]]></description>
		<author-notes lang="en"><![CDATA[Stargate Portal (aka Kiss Portal) is an advanced, fully integrated, portal for phpBB3. 
		The portal is packed with a host of features all of which are configurable via portal tab in the ACP.

		Editing your site files:
		The installation is designed for use with AutoMod, it will modify all files automatically saving you a lot of time...
		After completing the edits, point your browser to your_site/portal and follow instructions to add the database entries...
		Remember to delete or rename the portal folder after installing the database entries...

		Features:
		For a complete list see: http://www.stargate-portal.com/forum/web_pages.php?mode=features (Available end of December 2010)

		Style Support:
		A substantial number of the more popular styles have already been updated to support the Stargate Portal, should your favorite style require updating please contact stargate-portal.com and request a port...

		Additional copyright information:
		Please read the license agreement: portal/license.txt
		The portal copyright must be maintained in all page footers... Should you choose to remove this copyright notice, do not expect support as none will be given...

		Many thanks to everyone who supported the portal and a special thanks to the development team: JohnnyTheOne, livewirestu, NeXur, HelterSkelter and Mitch and Tyler...

		Please note the change log does not include non public (development) releases... See site for more information.]]></author-notes>
		<author-group>
			<author>
				<realname><![CDATA[Michael O'Toole]]></realname>
				<username><![CDATA[michaelo]]></username>
				<homepage><![CDATA[http://www.stargate-portal.com/]]></homepage>
				<email><![CDATA[o2l@eircom.net]]></email>
			</author>
		</author-group>
		<mod-version>3.2.1</mod-version>
		<installation>
			<level>intermediate</level>
			<time>2460</time>
			<target-version>3.0.9</target-version>
		</installation>
		<history>
			<entry>
				<date>2011-02-22</date>
				<rev-version>3.2.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[Please note, development release are not identified here.]]></change>
					<change><![CDATA[Change the name of the portal common folder (just added a leading underscore).]]></change>
					<change><![CDATA[The centre blocks corrected if style is not prosilver standard layout.]]></change>
					<change><![CDATA[Updated get group id, data is now cached for speed and reduced sql queries.]]></change>
					<change><![CDATA[For detailed information see: http://www.stargate-portal.com/forum/viewforum.php?f=10]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2010-09-30</date>
				<rev-version>3.0.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[Covering 2.0.4 to 3.0.9.]]></change>
					<change><![CDATA[Mod validation fixes...]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2010-08-17</date>
				<rev-version>2.0.4</rev-version>
				<changelog lang="en">
					<change><![CDATA[Mod validation report (first draft) fixes.]]></change>
					<change><![CDATA[Lots of corrections as per coding guidelines...]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2010-03-17</date>
				<rev-version>2.0.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[Updated to support common file sharing mod...]]></change>
					<change><![CDATA[Removed pips images.]]></change>
					<change><![CDATA[Moved bbcode images to images folder.]]></change>
					<change><![CDATA[Portal html files identical for subsilver and prosilver based styles.]]></change>
					<change><![CDATA[Arrange blocks and move/hide 100% working all browsers.]]></change>
					<change><![CDATA[portal.css file now loaded via functions.php.]]></change>
					<change><![CDATA[Portal Poll and Newsfeeds mods installed automatically.]]></change>
					<change><![CDATA[New 3.0.6/7 Quick Reply extras.]]></change>
					<change><![CDATA[Post can be designated as Local News or Global News.]]></change>
					<change><![CDATA[Standardised for css fix files (Opera/Mac/IE)]]></change>
					<change><![CDATA[Removed the size css files, all work is carried out in the portal header file]]></change>
					<change><![CDATA[Left and right layout files loaded via overall_header and overall_footer]]></change>
					<change><![CDATA[New UMIL based installation]]></change>
					<change><![CDATA[AutoMod Supported]]></change>
					<change><![CDATA[Removed Portal definitions form config.php]]></change>
					<change><![CDATA[Portal can now be enabled/disabled via APC]]></change>
					<change><![CDATA[Block visibility can be set to one or more groups...]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2008-06-06</date>
				<rev-version>1.0.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[Released for testing only...]]></change>
					<change><![CDATA[Several additional blocks.]]></change>
					<change><![CDATA[Introduced additional ACP control.]]></change>
					<change><![CDATA[Added Mini-modules...]]></change>
					<change><![CDATA[Added portal youtube mod...]]></change>
					<change><![CDATA[Added web pages...]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2005-06-06</date>
				<rev-version>0.0.1</rev-version>
				<changelog lang="en">
					<change><![CDATA[Original name: KISS Portal]]></change>
					<change><![CDATA[Not released to public (testing only)...]]></change>
					<change><![CDATA[Contained a handful of blocks and ACP controls.]]></change>
				</changelog>
			</entry>
		</history>
		<link-group>
			<link type="template" href="subsilver2.xml" lang="en">subsilver2</link>
		</link-group>
	</header>
	<action-group>
		<copy>
			<file from="root/basic_rules.php" to="basic_rules.php"/>
			<file from="root/inprogress.php" to="inprogress.php"/>
			<file from="root/portal.php" to="portal.php"/>
			<file from="root/portal_page.php" to="portal_page.php"/>
			<file from="root/sgp_refresh.php" to="sgp_refresh.php"/>
			<file from="root/web_page.php" to="web_page.php"/>
			<file from="root/web_page_utube.php" to="web_page_utube.php"/>
			<file from="root/favicon.ico" to="favicon.ico"/>
			<file from="root/adm/swatch2.php" to="adm/swatch2.php"/>
			<file from="root/adm/images/vars_edit.gif" to="adm/images/vars_edit.gif"/>
			<file from="root/adm/images/*.*" to="adm/images/*.*"/>
			<file from="root/adm/style/*.*" to="adm/style/*.*"/>
			<file from="root/blocks/*.*" to="blocks/*.*"/>
			<file from="root/images/*.*" to="images/*.*"/>
			<file from="root/includes/*.*" to="includes/*.*"/>
			<file from="root/language/*.*" to="language/*.*"/>
			<file from="root/mp3/*.*" to="mp3/*.*"/>
			<file from="root/portal/*.*" to="portal/*.*"/>
			<file from="root/js/*.*" to="js/*.*"/>
			<file from="root/umil/*.*" to="umil/*.*"/>
			<file from="root/styles/_portal_common/*.*" to="styles/_portal_common/*.*"/>
			<file from="root/styles/prosilver/imageset/*.*" to="styles/prosilver/imageset/*.*"/>
			<file from="root/styles/prosilver/imageset/en/*.*" to="styles/prosilver/imageset/en/*.*"/>
			<file from="root/styles/prosilver/template/*.*" to="styles/prosilver/template/*.*"/>
			<file from="root/styles/prosilver/template/blocks/*.*" to="styles/prosilver/template/blocks/*.*"/>
			<file from="root/styles/prosilver/theme/*.*" to="styles/prosilver/theme/*.*"/>
			<file from="root/styles/prosilver/theme/images/*.*" to="styles/prosilver/theme/images/*.*"/>
		</copy>
		<open src="common.php">
			<edit>
				<find><![CDATA[// Grab global variables, re-cache if necessary
$config = $cache->obtain_config();
]]></find>
				<action type="after-add"><![CDATA[
@define('STARGATE', ($config['portal_enabled']));
if (STARGATE)
{
	@define('DEBUG_QUERIES', false);
	$k_config		= $cache->obtain_k_config();	//  1 query
	$k_resources	= $cache->obtain_k_resources();	//  1 query
	$k_groups		= $cache->obtain_k_groups();	//  1 query
	$k_blocks		= $cache->obtain_block_data();	//	1 query
	$k_pages		= $cache->obtain_k_pages();		//	1 query
}

]]></action>
			</edit>
			<edit>
				<find><![CDATA[foreach ($cache->obtain_hooks() as $hook)
{
	@include($phpbb_root_path . 'includes/hooks/' . $hook . '.' . $phpEx);
}]]></find>
				<action type="after-add"><![CDATA[/* Stargate functions start... copyright phpbbireland.com 2005-2010 */
/*
**	This function returns a random image preprocessed with html tags and an option link...
**	The link is based on the image name... example www.phpbb.com.png
**	or even: sourceforge.net+project+project_donations.php@group_id=156802.gif
**  A token can be sent to filter images, for example all images containing menu_
*/
function get_random_image($dir_path, $add_link = false, $token = '', $raw = false)
{
	if (defined('IN_ADMIN') || (!STARGATE))
	{
		return;
	}

	// The $token can be used to filter image types...
	// initialise vars
	//$phpbb_root_path = (defined('PHPBB_ROOT_PATH')) ? PHPBB_ROOT_PATH : './';

	$lnk = '';
	$rand_image = '';
	$imglist = "";

	mt_srand((double)microtime()*1000001);

	$handle = @opendir($dir_path);

	// 01 January 2009 Just return for now as this can cause an error report if uses is Admin as the path will be incorrect //
	// quick report because people forget to add the image directory //

	if (!$handle)
	{
		return;
	}

	if (!$token)
	{
		$token = '.';
	}

	while (($file = readdir($handle)) !== false)
	{
		if (strpos($file, ".gif") || strpos($file, ".jpg") || strpos($file, ".png") && strpos($file ,$token))
		{
			$imglist .= "$file ";
		}
	}
	closedir($handle);

	$imglist = explode(" ", $imglist);
	$a = sizeof($imglist)-2;
	$random = mt_rand(0, $a);
	$image = $imglist[$random];

	if (strpos($image, 'www') || strpos($image, 'http'))
	{
		$add_link = true;
	}

	if ($add_link)
	{
		if (strstr($image, 'gif'))
		{
			$lnk = explode(".gif", $image);
		}
		else if (strstr($image, 'png'))
		{
			$lnk = explode(".png", $image);
		}
		else if (strstr($image, 'jpg'))
		{
			$lnk = explode(".jpg", $image);
		}

		$lnk[0] = str_replace('+','/', $lnk[0]);
		$lnk[0] = str_replace('@','?', $lnk[0]);

		$rand_image = "<a href=\"http://$lnk[0]\"><img src=\"$dir_path/$image\" alt=\"$lnk[0]\" /></a>";
	}
	else if (!$raw)
	{
		$rand_image .= "<img src=\"$dir_path/$image\" alt=\"\" />";
	}
	else
	{
		$rand_image .= "$dir_path/$image";
	}

	$imgs = '';

	return($rand_image);
}


/**
* Get user avatar Note! To avoid conflict copied and renamed for portal
*
* @param string $avatar Users assigned avatar name
* @param int $avatar_type Type of avatar
* @param string $avatar_width Width of users avatar
* @param string $avatar_height Height of users avatar
* @param string $alt Optional language string for alt tag within image, can be a language key or text
*
* @return string Avatar image (if avatars are enabled in ACP and a member has not selected an avatar).
*/

function sgp_get_user_avatar($avatar, $avatar_type, $avatar_width = '80', $avatar_height = '80', $alt = 'USER_AVATAR')
{
	if (!STARGATE)
	{
		return;
	}

	global $user, $config, $phpbb_root_path, $phpEx;

	// 18 August 2010 //
	// if avatars are disabled in acp return //
	if (!$config['allow_avatar'])
	{
		return;
	}

	if (empty($avatar) || !$avatar_type)
	{
		$poster_avatar = get_random_image($phpbb_root_path . 'images/avatars/no_avitar', false, '');

		// do we wish to resize? 28 January 2010 should not require else...? will look later //
		if ($avatar_width || $avatar_height)
		{
			if (strpos($poster_avatar, '/>"'))
			{
				$poster_avatar = str_replace('/>"', '" height="' . $avatar_height . '" width="' . $avatar_width . '" />', $poster_avatar);
			}
			elseif (strpos($poster_avatar, '/>'))
			{
				$poster_avatar = str_replace('/>', ' height="' . $avatar_height . '" width="' . $avatar_width . '" />', $poster_avatar);
			}
		}

		return($poster_avatar);
	}

	$avatar_img = '';

	switch ($avatar_type)
	{
		case AVATAR_UPLOAD:
			$avatar_img = $phpbb_root_path . "download/file.$phpEx?avatar=";
		break;

		case AVATAR_GALLERY:
			$avatar_img = $phpbb_root_path . $config['avatar_gallery_path'] . '/';
		break;
	}

	$avatar_img .= $avatar;
	return '<img src="' . (str_replace(' ', '%20', $avatar_img)) . '" width="' . $avatar_width . '" height="' . $avatar_height . '" alt="' . ((!empty($user->lang[$alt])) ? $user->lang[$alt] : $alt) . '" />';
}

/* Stargate functions ends */
]]></action>
			</edit>
		</open>
		<open src="mcp.php">
			<edit>
				<comment lang="en"><![CDATA[Line ~117]]></comment>
				<find><![CDATA[		'make_global'	=> 'f_announce',]]></find>
				<action type="after-add"><![CDATA[		'make_news'		=> 'f_announce',
		'make_news_global'	=> 'f_announce',]]></action>
			</edit>
			<edit>
				<find><![CDATA[		case 'make_global':]]></find>
				<action type="after-add"><![CDATA[		case 'make_news':
	    case 'make_news_global':]]></action>
			</edit>
			<edit>
				<find><![CDATA[function mcp_sorting($mode, &$sort_days, &$sort_key, &$sort_dir, &$sort_by_sql, &$sort_order_sql, &$total, $forum_id = 0, $topic_id = 0, $where_sql = 'WHERE')
{
	global $db, $user, $auth, $template;

	$sort_days = request_var('st', 0);
	$min_time = ($sort_days) ? time() - ($sort_days * 86400) : 0;

	switch ($mode)
	{
		case 'viewforum':
			$type = 'topics';
			$default_key = 't';
			$default_dir = 'd';

			$sql = 'SELECT COUNT(topic_id) AS total
				FROM ' . TOPICS_TABLE . "
				$where_sql forum_id = $forum_id
					AND topic_type NOT IN (" . POST_ANNOUNCE . ', ' . POST_GLOBAL . ")]]></find>
				<inline-edit>
					<inline-find><![CDATA[. POST_GLOBAL .]]></inline-find>
					<inline-action type="after-add"><![CDATA[ ' , ' . POST_NEWS . ' , ' . POST_NEWS_GLOBAL .]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="posting.php">
			<edit>
				<comment lang="en"><![CDATA[News Posts]]></comment>
				<find><![CDATA[			case POST_ANNOUNCE:]]></find>
				<action type="after-add"><![CDATA[
			case POST_NEWS:
			case POST_NEWS_GLOBAL:]]></action>
			</edit>
		</open>
		<open src="search.php">
			<edit>
				<find><![CDATA[					$sql_select .= ', tt.mark_time, ft.mark_time as f_mark_time';
				}
			}]]></find>
				<action type="after-add"><![CDATA[			if (STARGATE)
			{
				global $k_config;

				// move to databse in next revision //
				$k_config['tooltips_active'] = true;
				$k_config['tooltips_first'] = false;
				$k_config['tooltips_last'] = true;

				// Improved sql thanks to Rich McGirr and his Topic Text Hover Mod //
				if ($k_config['tooltips_active'])
				{
					if ($k_config['tooltips_first'])
					{
						$sql_from .= ' LEFT JOIN ' . POSTS_TABLE . ' p ON (p.post_id = t.topic_first_post_id)';
			   			$sql_select .= ', p.post_text AS first_message_tooltip';
					}
					if ($k_config['tooltips_last'])
					{
						$sql_from .= ' LEFT JOIN ' . POSTS_TABLE . ' pt ON (pt.post_id = t.topic_last_post_id)';
						$sql_select .= ', pt.post_text AS last_message_tooltip';
					}
				}
			}

]]></action>
			</edit>
			<edit>
				<find><![CDATA[				$u_mcp_queue = ($topic_unapproved || $posts_unapproved) ? append_sid("{$phpbb_root_path}mcp.$phpEx", 'i=queue&amp;mode=' . (($topic_unapproved) ? 'approve_details' : 'unapproved_posts') . "&amp;t=$result_topic_id", true, $user->session_id) : '';]]></find>
				<action type="after-add"><![CDATA[				if (STARGATE)
				{
					$tool_tips = $row['topic_title'] . ' : ' . sgp_truncate_message(bbcode_strip($row[ ('last_message_tooltip') ? 'last_message_tooltip': 'first_message_tooltip']), 400) . ' ... ';
				}]]></action>
			</edit>
			<edit>
				<find><![CDATA[				$tpl_ary = array(]]></find>
				<action type="after-add"><![CDATA[					'TOOLTIP'					=> $tool_tips,]]></action>
			</edit>
		</open>
		<open src="viewforum.php">
			<edit>
				<find><![CDATA[	'U_MARK_TOPICS'		=> ($user->data['is_registered'] || $config['load_anon_lastread']) ? append_sid("{$phpbb_root_path}viewforum.$phpEx", 'hash=' . generate_link_hash('global') . "&amp;f=$forum_id&amp;mark=topics") : '',]]></find>
				<action type="after-add"><![CDATA[	'FOLDER_NEWS_IMG'		=> $user->img('news_read', 'NEW_POST_NEWS'),
	'FOLDER_NEWS_NEW_IMG'	=> $user->img('news_unread', 'NO_NEW_POST_NEWS'),]]></action>
			</edit>
			<edit>
				<find><![CDATA[			$sql_array['LEFT_JOIN'][] = array('FROM' => array(FORUMS_TRACK_TABLE => 'ft'), 'ON' => 'ft.forum_id = t.forum_id AND ft.user_id = ' . $user->data['user_id']);
			$sql_array['SELECT'] .= ', ft.mark_time AS forum_mark_time';
		}
	}
}]]></find>
				<action type="after-add"><![CDATA[if (STARGATE)
{
	// move to databse in next revision //
	$k_config['tooltips_active'] = true;
	$k_config['tooltips_which'] = 'last';

	// Improved sql thank to Rich McGirr and his Topic Text Hover Mod //
	if ($k_config['tooltips_active'])
	{
		if ($k_config['tooltips_which'] == 'first')
		{
			$sql_array['LEFT_JOIN'][] = array('FROM' => array(POSTS_TABLE => 'pt'), 'ON' => 'pt.post_id = t.topic_first_post_id');
			$sql_array['SELECT'] .= ', pt.post_text AS message_tooltip';
		}
		else if ($k_config['tooltips_which'] == 'last')
		{
			$sql_array['LEFT_JOIN'][] = array('FROM' => array(POSTS_TABLE => 'ptl'), 'ON' => 'ptl.post_id = t.topic_last_post_id');
			$sql_array['SELECT'] .= ', ptl.post_text AS message_tooltip';
		}
	}
}]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~362]]></comment>
				<find><![CDATA[AND t.topic_type IN (' . POST_ANNOUNCE . ', ' . POST_GLOBAL . ')',]]></find>
				<inline-edit>
					<inline-find><![CDATA[ ')',]]></inline-find>
					<inline-action type="before-add"><![CDATA[', ' . POST_NEWS . ', ' . POST_NEWS_GLOBAL . ]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<find><![CDATA[		$s_type_switch_test = ($row['topic_type'] == POST_ANNOUNCE || $row['topic_type'] == POST_GLOBAL) ? 1 : 0;]]></find>
				<inline-edit>
					<inline-find><![CDATA[$row['topic_type'] == POST_GLOBAL]]></inline-find>
					<inline-action type="after-add"><![CDATA[ || $row['topic_type'] == POST_NEWS || $row['topic_type'] == POST_NEWS_GLOBAL ]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<find><![CDATA[			'S_TOPIC_TYPE_SWITCH'	=> ($s_type_switch == $s_type_switch_test) ? -1 : $s_type_switch_test)
		);]]></find>
				<action type="replace-with"><![CDATA[			'S_TOPIC_TYPE_SWITCH'	=> ($s_type_switch == $s_type_switch_test) ? -1 : $s_type_switch_test,

			'TOOLTIP'				=> (STARGATE && isset($row['message_tooltip'])) ? sgp_truncate_message(bbcode_strip(($row['message_tooltip'])), 500) : '',
			'TOPIC_ICON_IMG_GROUP'	=> (!empty($icons[$row['icon_id']])) ? $icons[$row['icon_id']]['group'] : '',
			'S_POST_NEWS'			=> ($row['topic_type'] == POST_NEWS) ? true : false,
			'S_POST_NEWS_GLOBAL'	=> ($row['topic_type'] == POST_NEWS_GLOBAL) ? true : false,
		));]]></action>
			</edit>
			<edit>
				<find><![CDATA[		$s_type_switch = ($row['topic_type'] == POST_ANNOUNCE || $row['topic_type'] == POST_GLOBAL) ? 1 : 0;]]></find>
				<inline-edit>
					<inline-find><![CDATA[$row['topic_type'] == POST_GLOBAL]]></inline-find>
					<inline-action type="after-add"><![CDATA[ || $row['topic_type'] == POST_NEWS || $row['topic_type'] == POST_NEWS_GLOBAL]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="viewonline.php">
			<edit>
				<find><![CDATA[			$location_url = append_sid("{$phpbb_root_path}index.$phpEx");
		break;]]></find>
				<action type="after-add"><![CDATA[
		case 'portal':
			if (STARGATE)
			{
				$location = $user->lang['PORTAL'];
				$location_url = append_sid("{$phpbb_root_path}portal.$phpEx");
				break;
			}
]]></action>
			</edit>
		</open>
		<open src="viewtopic.php">
			<edit>
				<find><![CDATA[if (($topic_data['topic_type'] == POST_STICKY || $topic_data['topic_type'] == POST_ANNOUNCE) && $topic_data['topic_time_limit'] && ($topic_data['topic_time'] + $topic_data['topic_time_limit']) < time())]]></find>
				<inline-edit>
					<inline-find><![CDATA[$topic_data['topic_type'] == POST_ANNOUNCE]]></inline-find>
					<inline-action type="after-add"><![CDATA[ || $topic_data['topic_type'] == POST_NEWS || $topic_data['topic_type'] == POST_NEWS_GLOBAL]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<find><![CDATA[$topic_mod .= ($allow_change_type && $auth->acl_get('f_announce', $forum_id) && $topic_data['topic_type'] != POST_GLOBAL) ? '<option value="make_global">' . $user->lang['MAKE_GLOBAL'] . '</option>' : '';]]></find>
				<action type="after-add"><![CDATA[if (STARGATE)
{
	$topic_mod .= ($allow_change_type && $auth->acl_get('f_announce', $forum_id) && $topic_data['topic_type'] != POST_NEWS) ? '<option value="make_news">' . $user->lang['MAKE_NEWS'] . '</option>' : '';
	$topic_mod .= ($allow_change_type && $auth->acl_get('f_announce', $forum_id) && $topic_data['topic_type'] != POST_NEWS_GLOBAL) ? '<option value="make_news_global">' . $user->lang['MAKE_NEWS_GLOBAL'] . '</option>' : '';
}]]></action>
			</edit>
			<edit>
				<find><![CDATA[	$message = censor_text($row['post_text']);]]></find>
				<action type="after-add"><![CDATA[	if (STARGATE)
	{
		$message = acronym_pass($message);
	}
]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~1496]]></comment>
				<find><![CDATA[	$s_first_unread = false;
	if (!$first_unread && $post_unread)
	{
		$s_first_unread = $first_unread = true;
	}]]></find>
				<action type="after-add"><![CDATA[
	if (STARGATE)
	{
		$message = sgp_local_acronyms($message);
	}

]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~1751]]></comment>
				<find><![CDATA[			'S_QUICK_REPLY'			=> true,]]></find>
				<action type="after-add"><![CDATA[			'S_SGP_QUICK_REPLY'		=> (isset($k_config)) ? ($k_config['sgp_quick_reply']) ? true : false : '',]]></action>
			</edit>
		</open>
		<open src="adm/index.php">
			<edit>
				<find><![CDATA[		'S_CONTENT_FLOW_END'	=> ($user->lang['DIRECTION'] == 'ltr') ? 'right' : 'left',
	));]]></find>
				<action type="after-add"><![CDATA[	// Stargate Portal
	if (STARGATE)
	{
		$template->assign_vars(array(
			'STARGATE'		=> true,
			'U_PORTAL'		=> append_sid("{$phpbb_root_path}portal.$phpEx")
			));
	}
	// Stargate Portal
]]></action>
			</edit>
		</open>
		<open src="adm/style/acp_forums.html">
			<edit>
				<find><![CDATA[<!-- INCLUDE overall_header.html -->]]></find>
				<action type="after-add"><![CDATA[<!-- Start: Edit #1 : Small mod to show all available icon images in images/forum_images directory, copyright 2007 phpbbireland.com Mike -->
<script>
function set_image(data)
{
	var path = 'images/forum_icons/' + data;
	document.getElementById('forum_image').value=path;
}

function ShowHide(id1, id2, id3)
{
	var onoff = expMenu(id1);
	if (id2 != '') expMenu(id2);
	if (id3 != '') SetCookie(id3, onoff, expire);
}

function expMenu(id)
{
	var element = null;
	if (document.getElementById)
	{
		element = document.getElementById(id);
	}
	else if (document.all)
	{
		element = document.all[id];
	}
	else if (document.layers)
	{
		element = document.layers[id];
	}

	if (!element)
	{
		// do nothing
	}
	else if (element.style)
	{
		if (element.style.display == "none")
		{
			element.style.display = "";
			return 1;
		}
		else
		{
			element.style.display = "none";
			return 2;
		}
	}
	else
	{
		element.visibility = "show";
		return 1;
	}
}
</script>
<!-- END: Edit #1 -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[		<!-- IF FORUM_IMAGE_SRC -->
			<dd><img src="{FORUM_IMAGE_SRC}" alt="{L_FORUM_IMAGE}" /></dd>
		<!-- ENDIF -->
	</dl>]]></find>
				<action type="after-add"><![CDATA[	<!-- Start: Edit #2 -->
	<div style="position:absolute; top:0; right:0; width:0px; visibility: hidden"><input id="namex" type="text"><input id="pw" type="password"></div>
	<dl>
		<dt><label for="forum_images">{L_AVAILABLE_FORUM_IMAGE}:</label><br /><span>{L_AVAILABLE_FORUM_IMAGE_EXPLAIN}</span></dt>

		<div style="display:" id="show">
			<div class="k_show_images_yes-icon">
				&nbsp;<a href="#" onclick="ShowHide('side'); ShowHide('hide'); ShowHide('show'); return(false);"><span>{L_SHOW_FORUM_IMAGES}</span></a>
			</div>
		</div>
		<div style="display:none" id="hide">
			<div class="k_show_images_no-icon">
				&nbsp;<a href="#" onclick="ShowHide('side'); ShowHide('show'); ShowHide('hide'); return(false);"><span>{L_SHOW_FORUM_IMAGES}</span></a>
			</div>
		</div>
		<div align="left" style="display: none;" id="side">
			<span class="imageline"><br /><br /><br />
			<!-- BEGIN forum_img_file_name -->
				<!-- IF forum_img_file_name.FORUM_IMAGE_OPT -->
					<!--<img src='{FORUM_IMAGE_SRC_PATH}{forum_img_file_name.FORUM_IMAGE_OPT}' title="{FORUM_IMAGE_PATH}{forum_img_file_name.FORUM_IMAGE_OPT}">-->
					<a href="#" onclick="set_image('{forum_img_file_name.FORUM_IMAGE_OPT}', true, true); return false;"><img src='{FORUM_IMAGE_SRC_PATH}{forum_img_file_name.FORUM_IMAGE_OPT}' title="{FORUM_IMAGE_PATH}{forum_img_file_name.FORUM_IMAGE_OPT}"></a>
				<!-- ENDIF -->
			<!-- END forum_img_file_name -->
			<br /><br /><br />
			</span>
		</div>
	</dl>
	<!-- END: Edit #2 -->]]></action>
			</edit>
		</open>
		<open src="adm/style/admin.css">
			<edit>
				<find><![CDATA[.phpinfo td, .phpinfo th, .phpinfo h2, .phpinfo h1 {
	text-align: left;
}]]></find>
				<action type="after-add"><![CDATA[/* Added by Stargate Portal
---------------------------------------- */
.imageline { width:auto; height:auto; border:none; float:left; padding-top: 5px;}
.row5 { background-color: #F9EDBD; }
.row6 { background-color: #E8DFC0; }


/* Additional reply bbcode for sgp simple editor ...
-------------------------------------------------- */
.bbb-bold, .bbb-bold a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-bold.gif"); width:22px; height:22px; }
.bbb-bold:hover{ background-position: 0px -23px;}.bbb-quote,
.bbb-italic, .bbb-italic a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-italic.gif");width:22px; height:22px;}
.bbb-italic:hover{ background-position: 0px -23px;}.bbb-quote, 
.bbb-quote a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-quote.gif"); width:22px; height:22px;}
.bbb-quote:hover{ background-position: 0px -23px;}.bbb-code, 
.bbb-code a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-code.gif");width:22px; height:22px;}
.bbb-code:hover{ background-position: 0px -23px;}.bbb-list, 
.bbb-list a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-list.gif");width:22px; height:22px;}
.bbb-list:hover{ background-position: 0px -23px;}.bbb-flash, 
.bbb-flash a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-flash.gif"); width:22px; height:22px;}
.bbb-flash:hover{ background-position: 0px -23px;}.bbb-image, 
.bbb-image a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-image.gif"); width:22px; height:22px;}
.bbb-image:hover{ background-position: 0px -23px;}
.bbb-url, .bbb-url a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-url.gif"); width:22px; height:22px;}
.bbb-url:hover{ background-position: 0px -23px;}
.bbb-under_line, .bbb-under_line a { background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-under_line.gif");width:22px; height:22px;}
.bbb-under_line:hover{ background-position: 0px -23px;}
.bbb-align_center, .bbb-align_center a { background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-align_center.gif");width:22px; height:22px;}
.bbb-align_center:hover{ background-position: 0px -23px;}
.bbb-align_left, .bbb-align_left a { background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-align_left.gif");width:22px; height:22px;}
.bbb-align_left:hover{ background-position: 0px -23px;}
.bbb-align_right, .bbb-align_right a { background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-align_right.gif");width:22px; height:22px;}
.bbb-align_right:hover { background-position: 0px -23px;}
.bbb-ordered_list, .bbb-ordered_list a { background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-ordered_list.gif");width:22px; height:22px;}
.bbb-ordered_list:hover{ background-position: 0px -23px;}
.bbb-add_list_item, .bbb-add_list_item a { background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-add_list_item.gif"); width:22px; height:22px;}
.bbb-add_list_item:hover { background-position: 0px -23px;}
.bbb-note, .bbb-note a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-note.gif");width:22px; height:22px;}
.bbb-note:hover { background-position: 0px -23px;}
.bbb-spoiler, .bbb-spoiler a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-spoiler.gif"); width:22px; height:22px;}
.bbb-spoiler:hover{ background-position: 0px -23px;}
.bbb-tab, .bbb-tab a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-tab.gif"); width:22px; height:22px;}
.bbb-tab:hover{ background-position: 0px -23px;}
.bbb-sup, .bbb-sup a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-sup.gif"); width:22px; height:22px;}
.bbb-sup:hover{ background-position: 0px -23px;}
.bbb-sub, .bbb-sub a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-sub.gif"); width:22px; height:22px;}
.bbb-sub:hover{ background-position: 0px -23px;}
.bbb-strike, .bbb-strike a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-strike.gif");width:22px; height:22px;}
.bbb-strike:hover { background-position: 0px -23px;}
.bbb-link, .bbb-link a{ background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-link.gif");width:22px; height:22px;}
.bbb-link:hover { background-position: 0px -23px;}
.rollover, .rollover a { display: inline; float:left; } .rollover a:hover { background-position: 0 -23px; }
.bbb-icon-spacer {background : transparent; border:none; background-image: url("./../../images/bbcode/bbb-icon-spacer.gif"); width:3px; height:22px;}
button {border: solid 3px;}]]></action>
			</edit>
		</open>
		<open src="adm/style/overall_header.html">
			<edit>
				<find><![CDATA[		<p><a href="{U_ADM_INDEX}">{L_ADMIN_INDEX}</a> &bull; <a href="{U_INDEX}">{L_FORUM_INDEX}</a></p>]]></find>
				<action type="replace-with"><![CDATA[		<p><a href="{U_ADM_INDEX}">{L_ADMIN_INDEX}</a> &bull; <a href="{U_INDEX}">{L_FORUM_INDEX}</a><!-- IF STARGATE --> &bull; <a href="{U_PORTAL}">{L_PORTAL}</a><!-- ENDIF --></p>]]></action>
			</edit>
		</open>
		<open src="includes/cache.php">
			<edit>
				<find><![CDATA[	/**
	* Obtain list of naughty words and build preg style replacement arrays for use by the
	* calling script
	*/]]></find>
				<action type="before-add"><![CDATA[	function obtain_k_config()
	{
		global $db;

		if (($k_config = $this->get('k_config')) !== false)
		{
			$sql = 'SELECT config_name, config_value
				FROM ' . K_BLOCKS_CONFIG_VAR_TABLE . '
				WHERE is_dynamic = 1';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				$k_config[$row['config_name']] = $row['config_value'];
			}
			$db->sql_freeresult($result);
		}
		else
		{
			$k_config = $k_cached_config = array();

			$sql = 'SELECT config_name, config_value, is_dynamic
				FROM ' . K_BLOCKS_CONFIG_VAR_TABLE;
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				if (!$row['is_dynamic'])
				{
					$k_cached_config[$row['config_name']] = $row['config_value'];
				}
				$k_config[$row['config_name']] = $row['config_value'];
			}
			$db->sql_freeresult($result);

			$this->put('k_config', $k_cached_config);
		}

		return $k_config;
	}

	function obtain_block_data()
	{
		global $db;

		if (($k_blocks = $this->get('k_blocks')) !== false)
		{
			$sql = 'SELECT *
				FROM ' . K_BLOCKS_TABLE . '
				WHERE active = 1 AND is_static = 0 ORDER BY ndx ASC';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				if (!$row['is_static'])
				{
					$k_blocks[$row['id']]['id']				= $row['id'];
					$k_blocks[$row['id']]['ndx']			= $row['ndx'];
					$k_blocks[$row['id']]['title']			= $row['title'];
					$k_blocks[$row['id']]['position']		= $row['position'];
					$k_blocks[$row['id']]['type']			= $row['type'];
					$k_blocks[$row['id']]['view_by']		= $row['view_by'];
					$k_blocks[$row['id']]['scroll']			= $row['scroll'];
					$k_blocks[$row['id']]['block_height']	= $row['block_height'];
					$k_blocks[$row['id']]['html_file_name']	= $row['html_file_name'];
					$k_blocks[$row['id']]['html_file_name']	= $row['html_file_name'];
					$k_blocks[$row['id']]['img_file_name']	= $row['img_file_name'];
					$k_blocks[$row['id']]['block_cache_time']	= $row['block_cache_time'];
				}
			}
			$db->sql_freeresult($result);
		}
		else
		{
			$k_blocks = $k_cached_blocks = array();

			$sql = 'SELECT *
				FROM ' . K_BLOCKS_TABLE . '
				WHERE active = 1 ORDER BY ndx ASC';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				if ($row['is_static'])
				{
					$k_cached_blocks[$row['id']]['id']				= $row['id'];
					$k_cached_blocks[$row['id']]['ndx']				= $row['ndx'];
					$k_cached_blocks[$row['id']]['title']			= $row['title'];
					$k_cached_blocks[$row['id']]['position']		= $row['position'];
					$k_cached_blocks[$row['id']]['active']			= $row['active'];
					$k_cached_blocks[$row['id']]['type']			= $row['type'];
					$k_cached_blocks[$row['id']]['view_by']			= $row['view_by'];
					$k_cached_blocks[$row['id']]['scroll']			= $row['scroll'];
					$k_cached_blocks[$row['id']]['block_height']	= $row['block_height'];
					$k_cached_blocks[$row['id']]['html_file_name']	= $row['html_file_name'];
					$k_cached_blocks[$row['id']]['img_file_name']	= $row['img_file_name'];
					$k_cached_blocks[$row['id']]['block_cache_time']	= $row['block_cache_time'];
				}
				$k_blocks[$row['id']]['id']				= $row['id'];
				$k_blocks[$row['id']]['ndx']			= $row['ndx'];
				$k_blocks[$row['id']]['title']			= $row['title'];
				$k_blocks[$row['id']]['position']		= $row['position'];
				$k_blocks[$row['id']]['type']			= $row['type'];
				$k_blocks[$row['id']]['view_by']		= $row['view_by'];
				$k_blocks[$row['id']]['scroll']			= $row['scroll'];
				$k_blocks[$row['id']]['block_height']	= $row['block_height'];
				$k_blocks[$row['id']]['html_file_name']	= $row['html_file_name'];
				$k_blocks[$row['id']]['html_file_name']	= $row['html_file_name'];
				$k_blocks[$row['id']]['img_file_name']	= $row['img_file_name'];
				$k_blocks[$row['id']]['block_cache_time']	= $row['block_cache_time'];
			}
			$db->sql_freeresult($result);

			$this->put('k_blocks', $k_cached_blocks);
		}

		return $k_blocks;
	}

	function obtain_k_pages()
	{
		global $db;

		if (($k_pages = $this->get('k_pages')) !== false)
		{
			$sql = 'SELECT page_id, page_name
				FROM ' . K_PAGES_TABLE;

			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				$k_pages[$row['page_id']]['page_id'] = $row['page_id'];
				$k_pages[$row['page_id']]['page_name'] = $row['page_name'];
			}
			$db->sql_freeresult($result);
		}
		else
		{
			$k_pages = $k_pages_cache = array();

			$sql = 'SELECT page_id, page_name
				FROM ' . K_PAGES_TABLE;

			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				$k_pages[$row['page_id']]['page_id'] = $row['page_id'];
				$k_pages[$row['page_id']]['page_name'] = $row['page_name'];
			}
			$db->sql_freeresult($result);

			$this->put('k_pages', $k_pages_cache);
		}
		return $k_pages;
	}


	//
	// get all group names/id's (used to avoid problems with group ID's changing)
	//
	function obtain_k_groups()
	{
		global $db;

		if (($k_groups = $this->get('k_groups')) !== false)
		{
			// Get us all the groups
			$sql = 'SELECT group_id, group_name
				FROM ' . GROUPS_TABLE . '
				ORDER BY group_id ASC, group_name';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				$k_groups[$row['group_id']]['group_id'] = $row['group_id'];
				$k_groups[$row['group_id']]['group_name'] = $row['group_name'];
			}
			$db->sql_freeresult($result);
		}
		else
		{
			$k_groups = $k_cached_groups = array();

			// Get us all the groups
			$sql = 'SELECT group_id, group_name
				FROM ' . GROUPS_TABLE . '
				ORDER BY group_id ASC, group_name';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				$k_cached_groups[$row['group_id']]['group_id'] = $row['group_id'];
				$k_cached_groups[$row['group_id']]['group_name'] = $row['group_name'];
			}
			$db->sql_freeresult($result);

			$this->put('k_groups', $k_cached_groups);
		}
		return $k_groups;
	}

	function obtain_k_resources()
	{
		global $db;

		if (($k_resources = $this->get('k_resources')) !== false)
		{
			$sql = 'SELECT *
				FROM ' . K_RESOURCES_TABLE  . '
				ORDER BY word ASC';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				/*
				$k_resources['id'] = $row['id'];
				$k_resources['word'] = $row['word'];
				$k_resources['type'] = $row['type'];
				*/
				$k_resources[] = $row['word'];

			}
			$db->sql_freeresult($result);
		}
		else
		{
			$k_resources = $k_cached_resources = array();

			$sql = 'SELECT *
				FROM ' . K_RESOURCES_TABLE  . '
				ORDER BY word ASC';
			$result = $db->sql_query($sql);

			while ($row = $db->sql_fetchrow($result))
			{
				/*
				$k_resources['id'] = $row['id'];
				$k_resources['word'] = $row['word'];
				$k_resources['type'] = $row['type'];
				*/
				$k_resources[] = $row['word'];
			}
			$db->sql_freeresult($result);

			$this->put('k_resources', $k_cached_resources);
		}
		return $k_resources;
	}
]]></action>
			</edit>
			<edit>
				<find><![CDATA[				$icons[$row['icons_id']]['display'] = (bool) $row['display_on_posting'];]]></find>
				<action type="after-add"><![CDATA[				$icons[$row['icons_id']]['group'] = (bool) $row['icons_group'];]]></action>
			</edit>
		</open>
		<open src="includes/constants.php">
			<edit>
				<find><![CDATA[define('POST_GLOBAL', 3);]]></find>
				<action type="after-add"><![CDATA[define('POST_NEWS', 4);
define('POST_NEWS_GLOBAL', 5);]]></action>
			</edit>
			<edit>
				<find><![CDATA[// Additional tables]]></find>
				<action type="after-add"><![CDATA[// Stargate Portal Tables
define('WELCOME_MESSAGE', 1);
define('NAV_MENUS', 1);
define('SUB_MENUS', 2);
define('HEAD_MENUS', 3);
define('FOOT_MENUS', 4);

define('K_MENUS_TABLE',				$table_prefix . 'k_menus');
define('K_BLOCKS_TABLE',			$table_prefix . 'k_blocks');
define('K_CLOUD_TABLE',				$table_prefix . 'k_cloud');
define('K_MODULES_TABLE',			$table_prefix . 'k_modules');
define('K_WEB_PAGES_TABLE',			$table_prefix . 'k_web_pages');
define('K_PLUGINS_TABLE',			$table_prefix . 'k_plugins');
define('K_BLOCKS_CONFIG_TABLE',		$table_prefix . 'k_blocks_config');
define('K_BLOCKS_CONFIG_VAR_TABLE',	$table_prefix . 'k_blocks_config_vars');
define('K_ACRONYMS_TABLE',			$table_prefix . 'k_acronyms');
define('K_QUOTES_TABLE',			$table_prefix . 'k_quotes');
define('K_NEWSFEEDS_TABLE',			$table_prefix . 'k_newsfeeds');
define('K_USERS_TABLE',				$table_prefix . 'k_users');
define('K_STYLES_STATUS_TABLE',		$table_prefix . 'k_styles_status');
define('K_REFERRALS_TABLE',			$table_prefix . 'k_referrals');
define('K_YOUTUBE_TABLE',			$table_prefix . 'k_youtube');
define('K_RESOURCES_TABLE',			$table_prefix . 'k_resource');
define('K_PAGES_TABLE',				$table_prefix . 'k_pages');]]></action>
			</edit>
		</open>
		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[		'SITE_DESCRIPTION'				=> $config['site_desc'],]]></find>
				<action type="after-add"><![CDATA[		'STARGATE_VERSION'				=> (isset($config['portal_version'])) ? $config['portal_version'] : '0.0.0',]]></action>
			</edit>
			<edit>
				<find><![CDATA[		'A_COOKIE_SETTINGS'		=> addslashes('; path=' . $config['cookie_path'] . ((!$config['cookie_domain'] || $config['cookie_domain'] == 'localhost' || $config['cookie_domain'] == '127.0.0.1') ? '' : '; domain=' . $config['cookie_domain']) . ((!$config['cookie_secure']) ? '' : '; secure')),
	));]]></find>
				<action type="after-add"><![CDATA[	// Stargate Portal Start
	if (STARGATE)
	{
		global $user, $queries, $cached_queries, $total_queries;

		$cache_time = (isset($k_config['block_cache_time'])) ? $k_config['block_cache_time'] : '600';

		$template->assign_vars(array(
			'COOKIE_NAME'			=> (isset($config['cookie_name'])) ? $config['cookie_name'] : '',
			'STARGATE_VERSION'		=> (isset($config['portal_version'])) ? $config['portal_version'] : '',

			'AVATAR_SMALL_IMG'		=> (STARGATE) ? sgp_get_user_avatar($user->data['user_avatar'], $user->data['user_avatar_type'], '35', '35') : '',
			'P_USERNAME'			=> (STARGATE) ? $user->data['username'] : '',
			'P_USERNAME_FULL'		=> (STARGATE) ? get_username_string('full', $user->data['user_id'], $user->data['username'], $user->data['user_colour']) : '',

			'T_THEME_PATH'			=> "{$web_path}styles/" . $user->theme['theme_path'] . '/theme',
			'T_TEMPLATE_PATH'		=> "{$web_path}styles/" . $user->theme['template_path'] . '/template',
			'T_SUPER_TEMPLATE_PATH'	=> (isset($user->theme['template_inherit_path']) && $user->theme['template_inherit_path']) ? "{$web_path}styles/" . $user->theme['template_inherit_path'] . '/template' : "{$web_path}styles/" . $user->theme['template_path'] . '/template',
			'T_IMAGESET_PATH'		=> "{$web_path}styles/" . $user->theme['imageset_path'] . '/imageset',
			'T_IMAGESET_LANG_PATH'	=> "{$web_path}styles/" . $user->theme['imageset_path'] . '/imageset/' . $user->data['user_lang'],
			'T_IMAGES_PATH'			=> "{$web_path}images/",
		));
		
		$set_time = time() + 31536000;
		$reset_time = time() - 31536000;
		$cookie_name = $cookie_value = $css = '';
		$cookie_name = $config['cookie_name'] . '_css';

		if (isset($_COOKIE[$cookie_name]))
		{
			$cookie_value = (int)$_COOKIE[$cookie_name];
		}

		$css = request_var('css', 0);
		if ($css) // set css //
		{
			$user->set_cookie('css', $css, $set_time);
		}
		else if ($cookie_value) // cookie set so use it //
		{
			$css = $cookie_value;
		}

		include($phpbb_root_path . 'includes/sgp_functions.' . $phpEx);
		include($phpbb_root_path . 'includes/sgp_portal_blocks.' . $phpEx);

		// support for stereo logos (where left and right images are mirror images) //
		// Introduced this for Startrek style but may use it in others... //
		$logo_right = $logo = sgp_get_rand_logo();
		$logo_right  = str_replace('logos', 'logos/right_images', $logo);

		// new random background image 10 January 2009 Mike //
		$rand_image = get_random_image('images/rand_backgrounds', false, '', true);
		$rand_color = basename($rand_image, ".jpg");

		$template->assign_vars(array(
			'STARGATE'						=> true,
			'DEBUG_QUERIES'					=> (defined('DEBUG_QUERIES')) ? DEBUG_QUERIES : '',

			'T_STYLESHEET_PORTAL_OVERLOAD'	=> ($css) ? "{$phpbb_root_path}styles/" . $user->theme['theme_path'] . '/theme/portal_' . $css . '.css' : "{$phpbb_root_path}styles/" . $user->theme['theme_path'] . '/theme/portal.css',
			'T_STYLESHEET_PORTAL_COMMON'	=> "{$phpbb_root_path}styles/_portal_common/theme/portal_common.css",

			'L_PORTAL'			=> $user->lang['FORUM_PORTAL'],
			'U_PORTAL'			=> append_sid("{$phpbb_root_path}portal.$phpEx"),
			'U_PORTAL_ARRANGE'	=> append_sid("{$phpbb_root_path}portal.$phpEx", "arrange=1"),
			'U_HOME'			=> append_sid("{$phpbb_root_path}portal.$phpEx"),
			'U_IMPRINT'			=> append_sid("{$phpbb_root_path}imprint.$phpEx"),
			'U_DISCLAIMER'		=> append_sid("{$phpbb_root_path}disclaimer.$phpEx"),

			'SITE_LOGO_IMG'			=> $logo,
			'SITE_LOGO_IMG_RIGHT'	=> $logo_right,
			'RANDOM_BACK'			=> $rand_image,
			'RANDOM_BACK_COLOR'		=> $rand_color,
		));
	}
	// Stargate Portal End
]]></action>
			</edit>
			<edit>
				<find><![CDATA[?>]]></find>
				<action type="before-add"><![CDATA[/* From topic_text_hover mod by Rich McGirr copyright 2008 */
if (!function_exists('bbcode_strip'))
{
	function bbcode_strip($text)
	{
		if (!STARGATE)
		{
			return;
		}

		static $RegEx = array();
		static $bbcode_strip = 'flash';
		// html is pretty but it may break the layout of the tooltips...let's
		// remove some common ones from the tip
		$text_html = array('&quot;','&amp;','&#039;','&lt;','&gt;');
		$text = str_replace($text_html,'',$text);
		if (empty($RegEx))
		{
			$RegEx = array('`<[^>]*>(.*<[^>]*>)?`Usi', // HTML code
				'`\[(' . $bbcode_strip . ')[^\[\]]+\].*\[/(' . $bbcode_strip . ')[^\[\]]+\]`Usi', // bbcode to strip
				'`\[/?[^\[\]]+\]`mi', // Strip all bbcode tags
				'`[\s]+`' // Multiple spaces
			);
		}
		return preg_replace($RegEx, ' ', $text );
	}
}]]></action>
			</edit>
		</open>
		<open src="includes/functions_content.php">
			<edit>
				<comment lang="en"><![CDATA[Style Based Smiles]]></comment>
				<find><![CDATA[function smiley_text($text, $force_option = false)
{
	global $config, $user, $phpbb_root_path;]]></find>
				<action type="after-add"><![CDATA[	if (STARGATE)
	{
		// SGP replace smile path to style based smilies if they exist //
		if (file_exists($phpbb_root_path . 'styles/' . $user->theme['theme_path'] . '/theme/images/smilies/index.htm'))
		{
			$config['smilies_path'] = 'styles/' . $user->theme['theme_path'] . '/theme/images/smilies';
		}
	}
]]></action>
			</edit>
			<edit>
				<find><![CDATA[?>]]></find>
				<action type="before-add"><![CDATA[// Call portal contents functions 24 March 2010
if (STARGATE)
{
	include($phpbb_root_path . 'includes/sgp_functions_content.' . $phpEx);
}

]]></action>
			</edit>
		</open>
		<open src="includes/functions_display.php">
			<edit>
				<find><![CDATA[			case POST_ANNOUNCE:
				$topic_type = $user->lang['VIEW_TOPIC_ANNOUNCEMENT'];
				$folder = 'announce_read';
				$folder_new = 'announce_unread';
			break;]]></find>
				<action type="after-add"><![CDATA[
			case POST_NEWS:
				if (STARGATE)
				{
					$topic_type = $user->lang['VIEW_TOPIC_NEWS'];
					$folder = 'news_read';
					$folder_new = 'news_unread';
				}
			break;

			case POST_NEWS_GLOBAL:
				if (STARGATE)
				{
					$topic_type = $user->lang['VIEW_TOPIC_NEWS'];
					$folder = 'news_read';
					$folder_new = 'news_unread';
				}
			break;]]></action>
			</edit>
			<edit>
				<find><![CDATA[	if (empty($avatar) || !$avatar_type || (!$config['allow_avatar'] && !$ignore_config))
	{
		return '';
	}]]></find>
				<action type="replace-with"><![CDATA[	if (empty($avatar) || !$avatar_type || (!$config['allow_avatar'] && !$ignore_config))
	{
		// if no avatar we generate a random one //
		if (!STARGATE)
		{
			return;
		}
		else
		{
			return (sgp_get_user_avatar ($avatar, $avatar_type, $avatar_width, $avatar_height, $alt = 'USER_AVATAR', false));
		}
	}]]></action>
			</edit>
		</open>
		<open src="includes/functions_posting.php">
			<edit>
				<comment lang="en"><![CDATA[Style Based Smiles]]></comment>
				<find><![CDATA[	if (sizeof($smilies))
	{
		$root_path = (defined('PHPBB_USE_BOARD_URL_PATH') && PHPBB_USE_BOARD_URL_PATH) ? generate_board_url() . '/' : $phpbb_root_path;]]></find>
				<action type="after-add"><![CDATA[		// SGP replace smile path to style based smilies if they exist //
		if (file_exists($root_path . 'styles/' . $user->theme['theme_path'] . '/theme/images/smilies/index.htm'))
		{
			$config['smilies_path'] = 'styles/' . $user->theme['theme_path'] . '/theme/images/smilies';
		}
]]></action>
			</edit>
			<edit>
				<find><![CDATA[		'global'	=> array('const' => POST_GLOBAL, 'lang' => 'POST_GLOBAL')]]></find>
				<action type="replace-with"><![CDATA[		'global'	=> array('const' => POST_GLOBAL, 'lang' => 'POST_GLOBAL'),
		'news'		=> array('const' => POST_NEWS, 'lang' => 'POST_NEWS'),
		'news_global'	=> array('const' => POST_NEWS_GLOBAL, 'lang' => 'POST_NEWS_GLOBAL')]]></action>
			</edit>
			<edit>
				<find><![CDATA[		$auth_key = ($auth_key == 'global') ? 'announce' : $auth_key;]]></find>
				<action type="after-add"><![CDATA[		if (STARGATE)
		{
			$auth_key = ($auth_key == 'news') ? 'announce' : $auth_key;
			$auth_key = ($auth_key == 'news_global') ? 'announce' : $auth_key;
		}]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Replace is used to here to ease the install process, please examine these lines if a previous mods altered this code...]]></comment>
				<find><![CDATA[			'S_TOPIC_TYPE_ANNOUNCE'	=> ($auth->acl_get('f_announce', $forum_id)))]]></find>
				<action type="replace-with"><![CDATA[			'S_TOPIC_TYPE_ANNOUNCE'	=> ($auth->acl_get('f_announce', $forum_id)),
			'S_TOPIC_TYPE_NEWS'		=> ($auth->acl_get('f_announce', $forum_id)),
			'S_TOPIC_TYPE_NEWS_GLOBAL'	=> ($auth->acl_get('f_announce', $forum_id)))]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[(Occurs twice) 1st find]]></comment>
				<find><![CDATA[				'topic_time_limit'			=> ($topic_type == POST_STICKY || $topic_type == POST_ANNOUNCE) ? ($data['topic_time_limit'] * 86400) : 0,]]></find>
				<inline-edit>
					<inline-find><![CDATA[$topic_type == POST_ANNOUNCE]]></inline-find>
					<inline-action type="after-add"><![CDATA[ || $topic_type == POST_NEWS || $topic_type == POST_NEWS_GLOBAL]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[2nd find]]></comment>
				<find><![CDATA[				'topic_time_limit'			=> ($topic_type == POST_STICKY || $topic_type == POST_ANNOUNCE) ? ($data['topic_time_limit'] * 86400) : 0,]]></find>
				<inline-edit>
					<inline-find><![CDATA[$topic_type == POST_ANNOUNCE]]></inline-find>
					<inline-action type="after-add"><![CDATA[ || $topic_type == POST_NEWS || $topic_type == POST_NEWS_GLOBAL]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="includes/functions_template.php">
			<edit>
				<find><![CDATA[		if (!file_exists($this->template->files[$handle]))
		{
			trigger_error("template->_tpl_load_file(): File {$this->template->files[$handle]} does not exist or is empty", E_USER_ERROR);
		}]]></find>
				<action type="replace-with"><![CDATA[		
		if (!file_exists($this->template->files[$handle]))
		{
			// Stargate Common files Mod. http://stargate-portal.com/forum/viewtopic.php?p=3438#p3438
			// Force this code to look in the common folder when comparing file times.
			// That is, find the correct file and substitute it... 18 March 2010

			global $user, $phpbb_root_path;

			$store = $missing_file = $this->template->files[$handle];

			// allow for phpBB inheritance //
			if($user->theme['template_inherits_id'])
			{
				$style_folder = $user->theme['template_inherit_path'];
			}
			else
			{
				$style_folder = $user->theme['template_path'];
			}

			$missing_file = str_replace($style_folder, '_portal_common', $missing_file);

			$this->template->files[$handle] = $missing_file;

			if (!file_exists($this->template->files[$handle]))
			{
				trigger_error ("template->_tpl_load_file()" . sprintf($user->lang['MISSING_FILES'], $store, $missing_file), E_USER_ERROR);
			}
			// End of mod //
		}]]></action>
			</edit>
		</open>
		<open src="includes/session.php">
			<edit>
				<find><![CDATA[		if (!$this->theme)
		{
			trigger_error('Could not get style data', E_USER_ERROR);
		}]]></find>
				<action type="replace-with"><![CDATA[		if (!$this->theme)
		{
			// SGP edit: Report missing style and redirect to default style.
			// This stops bots generating countless errors.

			add_log('critical', 'STYLE_MISSING', request_var('style', 0), $user->data['user_id']);
			redirect(build_url('style') .'?style='. $config['default_style']);

			//trigger_error('Could not get style data', E_USER_ERROR);
		}]]></action>
			</edit>
		</open>
		<open src="includes/template.php">
			<edit>
				<find><![CDATA[		else if ($config['load_tplcompile'])
		{]]></find>
				<action type="after-add"><![CDATA[			if (STARGATE)
			{
				// Stargate Common files Mod. http://stargate-portal.com/forum/viewtopic.php?p=3438#p3438
				// Force this code to look in the common folder when comparing file times.
				// That is, find the correct file and substitute it...

				if (!file_exists($this->files[$handle]))
				{
					// SGP file inheritance Mod. Any file can be inherited Mike //
					global $user, $phpbb_root_path;

					$missing_file = $this->files[$handle];
					$missing_filename = basename($missing_file);

					$style_folder = $user->theme['template_path'];
					$missing_file = str_replace($style_folder, '_portal_common', $missing_file);

					$this->files[$handle] = $missing_file;
					// Stargate Common files Mod
				}
			}
]]></action>
			</edit>
		</open>
		<open src="includes/acp/acp_board.php">
			<edit>
				<find><![CDATA[						'override_user_style'	=> array('lang' => 'OVERRIDE_STYLE',		'validate' => 'bool',	'type' => 'radio:yes_no', 'explain' => true),]]></find>
				<action type="after-add"><![CDATA[						'portal_enabled'		=> array('lang' => 'ENABLE_PORTAL',			'validate' => 'bool',	'type' => 'radio:yes_no', 'explain' => true),]]></action>
			</edit>
		</open>
		<open src="includes/acp/acp_forums.php">
			<edit>
				<find><![CDATA[				if (strlen($forum_data['forum_password']) == 32)
				{
					$errors[] = $user->lang['FORUM_PASSWORD_OLD'];
				}]]></find>
				<action type="after-add"><![CDATA[				// Start mod list forum_images Michaelo copyright 2007 phpbbireland.com //
				$dirslist=' ';
				$dirs = dir('./../images/forum_icons');
				while ($file = $dirs->read())
				{
					if (stripos($file, ".gif") ||  stripos($file, ".png"))
					{
						$dirslist .= "$file ";
					}
				}
				closedir($dirs->handle);
				$dirslist = explode(" ", $dirslist);
				sort($dirslist);

				for ( $i=0; $i < sizeof($dirslist); $i++ )
				{
					if ($dirslist[$i] != '')
					{
						$template->assign_block_vars('forum_img_file_name', array('FORUM_IMAGE_OPT' => $dirslist[$i]));
					}
				}
				$dirslist='';
				// End mod list forum_images Michaelo //
]]></action>
			</edit>
			<edit>
				<find><![CDATA[					'FORUM_IMAGE_SRC'			=> ($forum_data['forum_image']) ? $phpbb_root_path . $forum_data['forum_image'] : '',]]></find>
				<action type="after-add"><![CDATA[					'FORUM_IMAGE_SRC_PATH'		=> $phpbb_root_path . 'images/forum_icons/',
					'FORUM_IMAGE_PATH'			=> 'images/forum_icons/',]]></action>
			</edit>
		</open>
		<open src="includes/acp/acp_styles.php">
			<edit>
				<find><![CDATA['topic_moved', 'topic_read', 'topic_read_mine', 'topic_read_hot', 'topic_read_hot_mine', 'topic_read_locked', 'topic_read_locked_mine', 'topic_unread', 'topic_unread_mine', 'topic_unread_hot', 'topic_unread_hot_mine', 'topic_unread_locked', 'topic_unread_locked_mine', 'sticky_read', 'sticky_read_mine', 'sticky_read_locked', 'sticky_read_locked_mine', 'sticky_unread', 'sticky_unread_mine', 'sticky_unread_locked', 'sticky_unread_locked_mine', 'announce_read', 'announce_read_mine', 'announce_read_locked', 'announce_read_locked_mine', 'announce_unread', 'announce_unread_mine', 'announce_unread_locked', 'announce_unread_locked_mine', 'global_read', 'global_read_mine', 'global_read_locked', 'global_read_locked_mine', 'global_unread', 'global_unread_mine', 'global_unread_locked', 'global_unread_locked_mine', 'pm_read', 'pm_unread',]]></find>
				<inline-edit>
					<inline-find><![CDATA['pm_unread',]]></inline-find>
					<inline-action type="after-add"><![CDATA[ 'news_read', 'news_read_mine', 'news_read_locked', 'news_read_locked_mine', 'news_unread', 'news_unread_mine', 'news_unread_locked', 'news_unread_locked_mine',]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<find><![CDATA[			$file_tpl = "{$phpbb_root_path}styles/{$template_row['template_path']}/template/$tpl_file.html";
			$inherited = false;]]></find>
				<action type="after-add"><![CDATA[			// SGP MOD Redirect for common files starts //
			if (STARGATE)
			{
				// Check to see if file exists in current template, if not process common files //
				if (!file_exists($file_tpl))
				{
					// temp store //
					$store = $file_tpl;

					// replace template path with portal_common files path then check again //
					$file_tpl = str_replace($template_row['template_path'], '_portal_common', $file_tpl);

					if (file_exists($file_tpl))
					{
						$path = '_portal_common';

						// we found the common file so alter $file_tpl //
						$file_tpl = "{$phpbb_root_path}styles/{$path}/template/$tpl_file.html";
					}
					else
					{
						// no sign of it so put back original path //
						$file_tpl = $store;
					}
				}
			}
			// SGP MOD Redirect for common files ends //
]]></action>
			</edit>
		</open>
		<open src="includes/mcp/mcp_main.php">
			<edit>
				<find><![CDATA[			case 'make_global':]]></find>
				<action type="after-add"><![CDATA[			case 'make_news':
			case 'make_news_global':]]></action>
			</edit>
			<edit>
				<find><![CDATA[		case 'make_global':
			$new_topic_type = POST_GLOBAL;
			$check_acl = 'f_announce';
			$l_new_type = (sizeof($topic_ids) == 1) ? 'MCP_MAKE_GLOBAL' : 'MCP_MAKE_GLOBALS';
		break;]]></find>
				<action type="after-add"><![CDATA[		case 'make_news':
			$new_topic_type = POST_NEWS;
			$check_acl = 'f_announce';
			$l_new_type = (sizeof($topic_ids) == 1) ? 'MCP_MAKE_NEWS' : 'MCP_MAKE_NEWSS';
		break;

		case 'make_news_global':
			$new_topic_type = POST_NEWS_GLOBAL;
			$check_acl = 'f_announce';
			$l_new_type = (sizeof($topic_ids) == 1) ? 'MCP_MAKE_NEWS_GLOBAL' : 'MCP_MAKE_NEWSS_GLOBAL';
		break;]]></action>
			</edit>
		</open>
		<open src="language/en/common.php">
			<edit>
				<find><![CDATA[	'default_dateformat'	=> 'D M d, Y g:i a', // Mon Jan 01, 2007 1:37 pm
]]></find>
				<action type="after-add"><![CDATA[	// Portal Language Variables //
	'PORTAL'						=> 'Portal',
	'FORUM_PORTAL'					=> 'Portal',
	'TO_DAY'						=> 'Date: %s',
	'USER_REAL_NAME'				=> 'Real Name',
	'USER_REAL_NAME_EXPLAIN'		=> 'Users first name',
	'SUBMITTED_BY'					=> 'Submitted By',
	'BY'							=> 'By',
	'TITLE'							=> 'Title',
	'READ_FULL'						=> 'Read full message',
	'SHOW_ALL'						=> 'Show all announcements',
	'DONT_HAVE_ACCOUNT' 			=> 'We are a free and open<br />community, all are welcome.<br />',
	'REGISTRATION'       			=> '<b>Click here to Register</b>',
	'FORUM_INDEX'					=> 'Forum',
	'POST_BY_AUTHOR'				=> 'Author:',
	'PROFILE_SMALL'					=> 'UCP',
	'POST_BY_POSTER'				=> 'by',

	'FLAG'				=> 'Flag',
	'FLASH_IS_OFF'		=> '[flash] is <em>OFF</em>',
	'FLASH_IS_ON'		=> '[flash] is <em>ON</em>',
	'FLOOD_ERROR'		=> 'You cannot make another post so soon after your last.',
	'FONT_COLOR'		=> 'Font colour',
	'FONT_HUGE'			=> 'Huge',
	'FONT_LARGE'		=> 'Large',
	'FONT_NORMAL'		=> 'Normal',
	'FONT_SIZE'			=> 'Font size',
	'FONT_SMALL'		=> 'Small',
	'FONT_TINY'			=> 'Tiny',
	'MORE_SMILIES'		=> 'View more smilies',
	'NO_ANNOUNCEMENTS'	=> 'No current announcements',
	'VERSION'			=> 'Version',

	'BLOCK_CACHE_TIME_HEAD'		=> 'Block Cache Time',
	'BLOCK_CACHE_TIME'			=> 'Default block cache time.',
	'BLOCK_CACHE_TIME_EXPLAIN'	=> 'Used if cache time is not set (normally 600).',

	'CLICK_TO_ENLARGE'	=> 'Click to enlarge',
	'MOVE'				=> 'Move',
	'SHOW'				=> 'Show',
	'HIDE'				=> 'Hide',
	'SGP_REFRESH_ALL'	=> 'SGP Refresh All - version',
	'SGP_STYLE_ERROR_10'	=> 'The style option is not currently used in web pages... Please remove it from the address bar and press enter to continue...',
	'ERROR_PORTAL_MODULE'	=> 'Error! Could not query portal modules information: ',

	'WEB_PAGE'				=> 'Web Page',
	'YOUTUBE_PAGE'			=> 'Youtube Page',
	'WIDE_VERSION'			=> 'Wide Version',


	// BEGIN of text added by Quick Posting MOD
	'K_QUICK_REPLY'			=> 'Kiss Simple Quick Reply',
	'ADD_SMILIES'			=> 'Add smilies',
	'ATTACH_SIG'			=> 'Attach your signature',
	'DISABLE_BBCODE'		=> 'Disable BBCode',
	'DISABLE_MAGIC_URL'		=> 'Dont automatically parse URLs',
	'DISABLE_SMILIES'		=> 'Disable smilies',
	'RECENT_REPLY'			=> 'View latest reply...',
	'QUICK_REPLY'			=> 'Quick Reply',
	'QUICK_REPLY_NO'		=> 'Hide Quick Reply',
	'ACP_MINI'				=> 'Admin',
	'PROFILE_SMALL'			=> 'UCP',
	'RAND_BANNER'			=> 'Portal Random Banner',
	'ARRANGE_ON'			=> 'Arrange block',
	'ARRANGE_OFF'			=> 'Save block layouts',
	'WIDE'			=> 'Wide',
	'NARROW'		=> 'Fixed',
	'VIEW_POSTS'	=> 'View Posts',
	'CHATROOM'		=> 'Chat',

	// Shorter version of standard lang var for small (narrow) styles //
	'POST_NEWS'					=> 'News',
	'POST_NEWS_GLOBAL'			=> 'Global News',
	'SEARCH_ACTIVE_TOPICS_SMALL'	=> 'Active Topics!',
	'SEARCH_NEW_SMALL'			=> 'New Posts!',
	'SEARCH_SELF_SMALL'			=> 'Your Posts!',
	'SEARCH_UNANSWERED_SMALL'	=> 'Unanswered Posts!',
	'VIEW'						=> 'View',
	'VIEW_TOPIC_NEWS'			=> 'News: ',

	//SGP Refresh ALL
	'CACHE_PURGED'		=> '<br />&nbsp;&#187;&nbsp;Cache purged!',
	'CACHE_DIR_CLEANED'	=> '<br />&nbsp;&#187;&nbsp;cache directory cleaned up.',
	'DISABSLE_USE'		=> '<br />&nbsp;&#187;&nbsp;Disabled, use refresh in ACP for time being...',
	'DATABASE_TABLE'	=> ' database table!</b>',
	'DELETING_RSSCACHE'	=> '<b>Deleting rsscache_*.dat files in cache directory:</b>',
	'FAILED_UPDATE'		=> '<br /><b>Failed to update ',
	'LOG_RSS_CACHE_CLEANED'	=> '<strong>Deleted cached versions of all rsscache_*.dat files</strong><br /> %s',
	'NO_INFO_FOUND'		=> '<br /><b>No info found in ',
	'PURGING_CACHE'		=> '<b>Purging cache:</b>',
	'REFRESHED'		=> ' - <b>refreshed</b>',
	'REFRESHING_TEMPLATES'	=> '<b>Refreshing styles templates:</b>',
	'REFRESHING_THEMES'	=> '<b>Refreshing styles themes:</b>',
	'REFRESHING_IMAGESETS'	=> '<b>Refreshing styles imagesets:</b>',
	'SGP_REFRESH_ALL'	=> 'SGP Refresh ALL',
	'SGPRA_EXEPTIONS'	=> '<strong><font color="#FF0000">!NOTE</font>:<br />SGP Refresh ALL completed with exceptions!</strong> (see above for info)<br />',
	'SGPRA_LOG_IN'		=> '<strong>log in</strong></a> as an <font color="#FF0000"><strong>ADMINISTRATOR</strong></font> and <font color="#FF0000"><strong>refresh</strong></font> this page...</b><br /><br /><hr />',
	'SGPRA_NO_ADMIN'	=> '<font color="#FF0000"><strong>You do not have permission to run SGP Refresh ALL!</strong></font>',
	'SGPRA_NO_ERRORS'	=> '<br /><strong><font color="#00FF00">SGP Refresh ALL completed without any errors!...</font></strong><br />',

	'ARRANGE_ON'	=> 'Arrange Blocks',
	'ARRANGE_OFF'	=> 'Save Changes',
	'SGP_TOOLS'		=> 'Stargate Tools',
	'WIDE2'			=> 'Style Width (100%)',
	'NARROW2'		=> 'Style Width (70~90%)',
	'TOOLS_ON'		=> 'Portal Tools',
	'TOOLS_OFF'		=> 'Save Changes',
	'ARRANGE_ON'	=> 'Arrange Blocks',
	'ARRANGE_OFF'	=> 'Save Changes',
	'SGP_TOOLS'		=> 'Stargate Tools',
	'WIDE2'			=> 'Style Width (100%)',
	'NARROW2'		=> 'Style Width (~70%)',
	'PLURAL'		=> 'S',

	//youtube webpage
	'NO_COMMENTS'			=> 'No comments to display.',
	'POSTERS_COMMENT'		=> '%1$ss comments: %2$s.',
	'VIDEO_POSTER'			=> 'Posted by',
	'YOUTUBE'				=> 'Youtube',
	'SWPYVL'				=> 'Stargate Web Pages: youtube video links',
	'SGP_SUPPORTING'		=> 'Stargate Portal &bull; Supporting Communities Worldwide',
	'SGP_IN_DEVELOPMENT'	=> 'Stargate-Portals youtube web-pages (in development)',
	'TITLE'					=> 'Title',
	'PERFORMED_BY'			=> 'Performed by',
	'RATING'				=> 'Rating',
	'CATEGORY'				=> 'Category',
	'POSTED_BY'				=> 'Posted by',
	'COMMENT'				=> 'Comment',

	'ACP_FILE_BACKUP'			=> 'Backup files',

	'FULL_SEARCH'	=> 'Full Search: ',
	'SEARCH_DAYS'	=> 'Search days: ',
	'T_LIMITS'		=> 'Limit: ',
	'STICKY'		=> 'Sticky',
	'NORMAL'		=> 'Normal',

	'TOPICS_PER_FORUM_DISPLAY'	=> ' topics per forum &bull; Display: ',
	'TITLE_LEGEND'				=> 'Title Legend',

	'FOUND'		=> 'Found: ',
	'OF_TYPE'	=> ' of type: ',

	// Errors
	'ERROR_PORTAL_ANNOUNCE'			=> 'Error! Could not query announcements information',
	'ERROR_PORTAL_BLOCKS'			=> 'Error! Could not retrieve Block data',
	'ERROR_PORTAL_CLOUD'			=> 'Error! Could not retrieve cloud data',
	'ERROR_PORTAL_CONFIG'			=> 'Error! Could not retrieve portal config data',
	'ERROR_PORTAL_FORUMS'			=> 'Error! Could not query forums information',
	'ERROR_PORTAL_HTTP'				=> 'Error! Could not retrieve HTTP Referrals data',
	'ERROR_PORTAL_HTTP_DELETE'		=> 'Error! Couldnt delete HTTP Referrals',
	'ERROR_PORTAL_HTTP_QUERY'		=> 'Error! Couldnt query HTTP Referrals',
	'ERROR_FORUM_INFO'				=> 'Error! Could not query forum info',
	'ERROR_PORTAL_MENUS'			=> 'Error! Could not query portal menus information ',
	'ERROR_PORTAL_MODULE'			=> 'Error! Could not query portal modules information: ',
	'ERROR_PORTAL_NEWS'				=> 'Error! Could not query news data',
	'ERROR_PORTAL_QUOTES'			=> 'Error! Could not query portal quotes',
	'ERROR_PORTAL_RECENT_TOPICS'	=> 'Error! Could not query recent topics data',
	'ERROR_PORTAL_STATUS'			=> 'ERROR! Portal status table error.',
	'ERROR_PORTAL_STYLE_SELECT'		=> 'Error! Style Select', 
	'ERROR_PORTAL_STYLE_STATUS'		=> 'Error! Could not query styles status information',
	'ERROR_PORTAL_VIDEO'			=> 'Error! Portal youtube video table',
	'ERROR_PORTAL_SUB_MENU'			=> 'Error! Could not query portal sub menus information',
	'ERROR_PORTAL_WEB_TABLE'		=> 'Error! Portal Web Table',
	'ERROR_PORTAL_WELCOME'			=> 'Error! Could not query messages (Welcome etc...)',
	'ERROR_PORTAL_WORDS'			=> 'Error! Words table...',
	'ERROR_SMILIES_DATA'			=> 'Error! Could not get smilies data',

	'ERROR_USER_TABLE'				=> 'Error! Could not retrieve user table data',

	'COULD_NOT_QUERY_K_MODULES'		=> 'Error! Could not query portal k_modules table',
	'COULD_NOT_UPDATE_K_MODULES'	=> 'Error! Could not update k_modules table',

	'RE-INDEXING BLOCKS'			=> 'Error! You need to re-index the blocks!',

	'MISSING_BLOCK_DATA'			=> 'You have not entered all the required data!',
	'COULD_NOT_ADD_BLOCK'			=> 'Error! Could not add block!',
	'COULD_NOT_EDIT_BLOCK'			=> 'Error! Could not edit block',
	'COULD_NOT_RETRIEVE_BLOCK'		=> 'Error! Could not retrieve block data',
	'COULD_NOT_REINDEX_BLOCKS'		=> 'Error! Could not reindex blocks',
	
	'WARNINGIMG_COPYRIGHT'			=> 'No copyright info',
	'WARNING_LOGIN_STYLE_SELECT'	=> 'Please login to use Style Select block',
	'WARNINGIMG_DIR'				=> 'Check to see if you added the image directory!',

	'NO_BLOCK_ID'					=> 'Missing ID?',
	'NO_BOT_DATA'					=> 'No bot data to display',
	'BLOCK_CURRENTLY_DISABLED'		=> 'Block disabled!',

	'SOMETHING_WENT_WRONG'			=> 'An error occurred, this should not happen... Please check code at line indicated: ',
	'MISSING_FILES'					=> ' error:<br /><br />File %1$s or <br />File %2$s does not exist or is empty.',

	'LINE'					=> 'line ',
	'BEGIN'					=> 'BEGIN',
	'END'					=> 'END',
	'WEB_PAGE_EXAMPLES_1'	=> 'Web Pages Examples:',
	'WEB_PAGE_EXAMPLES_2'	=> 'These pages are presented as example only, not all links are valid...<br />',
	'THIS_MEANS_YOU'		=> 'you ;-)',
	'TIME_BEING'			=> 'Use refresh in ACP for time being...',
	'MINI_SAMPLE_1'			=> 'This block was written using the MiniMod module... No database entries or sql queries were required. Only installed styles will be displayed here... The block is for stargatestyles only... Anyone wanting to use this code will have to ask Mitch.',
	'CLICK TO ENLARGE'		=> 'Click to enlarge',
	'PORTED_STYLES'			=> 'Ported Styles',
	'UNDER_CONSTRUCTION'	=> 'Under construction...',
	'NO_POLL'				=> 'No poll selected',
	'MP3_PLAYER'			=> 'SGP MP3 Player',
	'RSS_DISABLED'			=> 'Newsfeeds are currently disabled',
	'RETURN_PORTAL'			=> '%sReturn to the portal page%s',
	'LOGOUT_REDIRECT_P'		=> 'Yoou have logged out... retirning to portal',
	'NO_ID_GIVEN'			=> 'No id supplied<br />',
	'TEAM_MAX_COUNT'		=> '(limiting: %s per team)',
	'GO_TO_DEV_SITE'		=> 'Go to Dev Site',
]]></action>
			</edit>
		</open>
		<open src="language/en/mcp.php">
			<edit>
				<find><![CDATA[	'MCP_MAKE_NORMALS_CONFIRM'		=> 'Are you sure you want to change the selected topics to Standard Topics?',]]></find>
				<action type="after-add"><![CDATA[	'MCP_MAKE_NEWS'					=> 'Modify to News',
	'MCP_MAKE_NEWS_CONFIRM'			=> 'Are you sure you want to change this topic to a News Item?',
	'MCP_MAKE_NEWSS'				=> 'Modify to News Items',
	'MCP_MAKE_NEWSS_CONFIRM'		=> 'Are you sure you want to change these topics to a News Items?',
	'MCP_MAKE_NEWS_GLOBAL'			=> 'Modify to Global News',
	'MCP_MAKE_NEWS_GLOBAL_CONFIRM'	=> 'Are you sure you want to change this topic to a Global News Item?',
	'MCP_MAKE_NEWSS_GLOBAL'			=> 'Modify to Global News Items',
	'MCP_MAKE_NEWSS_GLOBAL_CONFIRM'	=> 'Are you sure you want to change these topics to a Global News Items?',]]></action>
			</edit>
		</open>
		<open src="language/en/ucp.php">
			<edit>
				<find><![CDATA[));]]></find>
				<action type="before-add"><![CDATA[	'UCP_K_BLOCKS'			=> 'Portal Options',

	'UCP_K_BLOCKS_ARRANGE'	=> 'Arrange blocks',
	'UCP_K_BLOCKS_DELETE'	=> 'Delete layout',
	'UCP_K_BLOCKS_EDIT'		=> 'Edit blocks layout',
	'UCP_K_BLOCKS_INFO'		=> 'Portal information',
	'UCP_K_BLOCKS_WIDTH'	=> 'Set page width',

	'ARRANGE_ICO'			=> 'Arrange Icon',
	'ARRANGE_ICON'			=> 'Arrange Blocks, lets you organise blocks from the portal page...<br />You can <strong>move</strong>, <strong>hide</strong> or, <strong>un-hide</strong> them as you wish...<br /><br />Depending on the style, the arrange icon (or text links) are normally located in the header to the left of the phpBB text resize icon...<br /><br />Please note, changes are automatically saved when browse to any othe page... <br /><br />Some arrange icons/text examples: ',
	'ARRANGE_NOW'			=> ' &bull; Arrange Blocks &bull; Tools.',

	'UCP_K_INFO_ARRANGE'	=> 'NOT SET',
	'UCP_K_INFO_DELETE'		=> 'Delete your current layout and use the board defaults.<br /><br />',
	'UCP_K_INFO_EDIT'		=> 'Manually edit your current block layout.<br />Can also be used to add newly installed blocks...<br /><br />',
	'UCP_K_INFO_INFO'		=> 'Some basic portal information here......',

	'UCP_K_INFO_WIDTH'		=> '<br />If your style support it, you can use these images to set the overall width of the page',
	'UCP_K_NOT_SAVED'		=> 'Block data could not be saved!',

	'UCP_K_SAVED'			=> 'Your layout has been updated... <img src="images/working.gif" height="15" width="15" alt="" />',
	'UCP_K_RESET'			=> 'Blocks reset to default positions... refreshing page... <br />',

	'DEFAULT_BLOCKS'		=> 'Default blocks',

	'DELETE_BLOCKS'			=> 'Check to reset blocks',
	'DELETE_BLOCKS_EXPLAIN'	=> '(to default positions).',
	'UCP_K_LINK'			=> '<a href="%s>" Arrange Blocks</a>',

	'ARRANGE_BLOCKS'		=> '',
	'OPTION_WIDTH'			=> 'Wide/Narrow',

	'DEV_SITE'				=> 'Development site: ',
	'B_VERSION'				=> 'build',
	'P_VERSION'				=> 'Installed version',]]></action>
			</edit>
		</open>
		<open src="language/en/viewtopic.php">
			<edit>
				<comment lang="en"><![CDATA[Make sure your editor saves all language files with encoding set to UTF-8 and file format Unix for all language file...]]></comment>
				<find><![CDATA[	'MAKE_STICKY'				=> 'Change to Sticky',]]></find>
				<action type="after-add"><![CDATA[	'MAKE_NEWS'					=> 'Change to News',
	'MAKE_NEWS_GLOBAL'			=> 'Change to Global News',]]></action>
			</edit>
		</open>
		<open src="language/en/acp/common.php">
			<edit>
				<find><![CDATA[	'NO_PASSWORD_SUPPLIED'	=> 'You need to enter your password to access the Administration Control Panel.',]]></find>
				<action type="before-add"><![CDATA[	'NO_EDIT'				=> 'Cant Edit',
	'NO_DELETE'				=> 'Cant Delete',
	'NO_MOVE_DOWN'			=> 'Cant move down',
	'NO_MOVE_UP'			=> 'Cant move up',
	'NO_RESYNC'				=> 'Resynchronise Disabled',]]></action>
			</edit>
			<edit>
				<find><![CDATA[?>]]></find>
				<action type="before-add"><![CDATA[// phpbbportal profile fields
$lang = array_merge($lang, array(

	'ACP_CAT_PORTAL'				=> 'Portal',
	'ACP_CAT_PORTAL_TOOLS'			=> 'Portal Tools',
	'ACP_CAT_CLOUD'					=> 'Cloud Tags',
	'ACP_CAT_STATUS_CONFIG'			=> 'Config Status',
	'ACP_K_WEBPAGES'				=> 'Portal Webpages',

// Common
	'ACP_K_UP'						=> 'Move Up',
	'ACP_K_DOWN'					=> 'Move Down',

// Blocks
	'ACP_K_BLOCKS'					=> 'Blocks',
	'ACP_K_BLOCKS_ADD'				=> 'Add a New Block',
	'ACP_K_BLOCKS_EDIT'				=> 'Edit Block',
	'ACP_K_BLOCKS_DELETE'			=> 'Delete Blocks',
	'ACP_K_BLOCKS_MANAGE'			=> 'Manage All Blocks',
	'ACP_K_PAGE_LEFT_BLOCKS'		=> 'Manage Left Blocks',
	'ACP_K_PAGE_CERTRE_BLOCKS'		=> 'Manage Centre Blocks',
	'ACP_K_PAGE_RIGHT_BLOCKS'		=> 'Manage Right Blocks',
	'ACP_K_BLOCKS_REINDEX'			=> 'Reindex Blocks',

// Menus
	'ACP_K_MENUS'					=> 'Menus',
	'ACP_K_MENU_HEADER'				=> 'Header Menus',
	'ACP_K_MENU_MAIN'				=> 'Main (navigation) Menu',
	'ACP_K_MENU_SUB'				=> 'Sub (secondary) Menus',
	'ACP_K_MENU_MANAGE'				=> 'Manage Menus',
	'ACP_K_MENU_CREATE'				=> 'Create a new Menu Item',
	'ACP_K_MENU_EDIT'				=> 'Edit Menu Item',
	'ACP_K_MENU_DELETE'				=> 'Delete a Menu Item',
	'ACP_K_MENU_ICONS'				=> 'Manage Menu Icons',
	'ACP_K_MENU_ALL'				=> 'View all Menu Items',
	'ACP_K_MENU_UNALLOCATED'		=> 'View unallocated items',

// Modules
	'ACP_K_MODS_ADD'				=> 'Add a New Module',
	'ACP_K_MODS_BLOCKS'				=> 'Block Modules',
	'ACP_K_MODS_BUGS'				=> 'Bugs Modules',
	'ACP_K_MODS_MODULES'			=> 'Mods Modules',
	'ACP_K_MODS_STYLES'				=> 'Styles Modules',
	'ACP_K_MODS_STATUS'				=> 'Status Modules',
	'ACP_K_MODS_MISC'				=> 'Miscellaneous Modules',
	'ACP_K_MODS_MODS'				=> 'Mod Modules',
	'ACP_K_MODS_ALL'				=> 'All Modules',
	'ACP_K_MODS_EDIT'				=> 'Edit Module',
	'ACP_K_MODS_DELETE'				=> 'Delete Module',
	'ACP_K_CONFIG_WELCOME'			=> 'Manage Welcome Message',
	'ACP_K_CONFIG_STYLES'			=> 'Manage Styles Mods',

// Modules Web Pages
	'ACP_K_WEB_PAGES_ADD'			=> 'Add a New Web Page',
	'ACP_K_WEB_PAGES_ALL'			=> 'View all pages',
	'ACP_K_WEB_PAGES_EDIT'			=> 'Edit Web Page',
	'ACP_K_WEB_PAGES_DELETE'		=> 'Delete this web page',
	'ACP_K_WEB_PAGES_BODY'			=> 'Page Bodies',
	'ACP_K_WEB_PAGES_HEAD'			=> 'Page Headers',
	'ACP_K_WEB_PAGES_FOOT'			=> 'Page Footers',
	'ACP_K_WEB_PAGES_PORTAL'		=> 'Manage Portal pages',

// phpBB Pages
	'ACP_K_PAGES_ADD'		=> 'Add page',
	'ACP_K_PAGES_DELETE'	=> 'Delete page',

// Modules Variables
	'ACP_K_VARS'				=> 'Portal Variables',
	'ACP_K_CONFIG'				=> 'Main Config',
	'ACP_K_PORTAL_CONFIG'		=> 'Portal Config',
	'ACP_K_MODULES'				=> 'Mini Modules ',
	'ACP_K_VARS_CONFIG'			=> 'Portal Variables',
	'ACP_K_VARS_CONFIG2'		=> 'Block Module Variables',
	'ACP_K_POLL'				=> 'Polls',
	'ACP_K_NEWSFEEDS'			=> 'Newsfeeds',
	'ACP_K_ACRONYMS'			=> 'Acronyms',
	'ACP_K_WEB_PAGES'			=> 'Web Pages',
	'ACP_K_REFERRALS'			=> 'Referrals',
	'ACP_K_TOOLS'				=> 'Additional Mods and Tools',
	'ACP_MOD_VERSION_CHECK'		=> 'Mod Version Check',
	'ACP_K_QUOTES'				=> 'Quotes',
// Cloud
	'ACP_K_CLOUD'				=> 'Cloud',
	'ACP_K_CLOUD_EXPLAIN'		=> 'Here you can add, edit and delete tags',
	'ACP_K_CLOUD_TAG'			=> 'Tag',
	'ACP_K_CLOUD_TAG_EXPLAIN'	=> 'Here you can add, edit and delete tags',
	'ACP_K_CLOUD_ADD'			=> 'Add a tag',
	'ACP_K_CLOUD_DELETE'		=> 'Delete tag',
	'ACP_K_CLOUD_EDIT'			=> 'Edit tag',
	'ACP_K_CLOUD_BROWSE'		=> 'Browse tags',
	'ACP_K_QUOTES_MANAGE'		=> 'Quotes',
// youtube
	'ACP_K_YOUTUBE'				=> 'SGP youtubes Mod',
	'ACP_K_YOUTUBE_EXPLAIN'		=> 'Here you can manage your yourtube videos.',
	'ACP_K_YOUTUBE_MANAGE'		=> 'Manage youtube videos',
	'ACP_K_YOUTUBE_ADD'			=> 'Add a youtube video',
	'ACP_K_YOUTUBE_BROWSE'		=> 'Browse youtube videos',

// Quotes
	'ACP_K_QUOTES_ADD'			=> 'Add quote',
	'ACP_K_QUOTES_EDIT'			=> 'Edit quote',
	'ACP_K_QUOTES_CONFIG'		=> 'Configure quotes',
	'QUOTE_ADD'					=> 'Add quote',
	'QUOTE_ADDED'				=> 'Quote added to databse',
	'CONFIG_QUOTES'				=> 'Configure quotes',
	'QUOTE_AUTHOR'				=> 'Author',
	'QUOTES_SETTINGS'			=> 'Quote block settings',
	'LOAD_FROM_FILE'			=> 'Load quotes from the quote file?',
	'FILE_TO_USE'				=> 'The name of the quote file to load',
	'FILE_TO_USE_EXPLAIN'		=> 'The quote files should be located in root/store/ folder',

// Resources
	'ACP_K_RESOURCE_WORDS'		=> 'Portal Resources',

// Country Flag
	'USER_COUNTRY_FLAG'			=> 'User Country Flag',

// BBCODES used in pages
	'BBCODE_A_HELP'				=> 'Inline uploaded attachment: [attachment=]filename.ext[/attachment]',
	'BBCODE_B_HELP'				=> 'Bold text: [b]text[/b]',
	'BBCODE_C_HELP'				=> 'Code display: [code]code[/code]',
	'BBCODE_E_HELP'				=> 'List: Add list element',
	'BBCODE_F_HELP'				=> 'Font size: [size=x-small]small text[/size]',
	'BBCODE_IS_OFF'				=> '%sBBCode%s is <em>OFF</em>',
	'BBCODE_IS_ON'				=> '%sBBCode%s is <em>ON</em>',
	'BBCODE_I_HELP'				=> 'Italic text: [i]text[/i]',
	'BBCODE_L_HELP'				=> 'List: [list]text[/list]',
	'BBCODE_LISTITEM_HELP'		=> 'List item: [*]text[/*]',
	'BBCODE_O_HELP'				=> 'Ordered list: [list=]text[/list]',
	'BBCODE_P_HELP'				=> 'Insert image: [img]http://image_url[/img]',
	'BBCODE_Q_HELP'				=> 'Quote text: [quote]text[/quote]',
	'BBCODE_S_HELP'				=> 'Font color: [color=red]text[/color]  Tip: you can also use color=#FF0000',
	'BBCODE_U_HELP'				=> 'Underline text: [u]text[/u]',
	'BBCODE_W_HELP'				=> 'Insert URL: [url]http://url[/url] or [url=http://url]URL text[/url]',
	'BBCODE_D_HELP'				=> 'Flash: [flash=width,height]http://url[/flash]',

));

// Stargate aka Kiss Plugins module
$lang = array_merge($lang, array(

	'ACP_CAT_K_BLOCKS_MANAGE'		=> 'Portal Blocks',
	'ACP_CAT_K_MENUS_MANAGE'		=> 'Portal Menus',

	'ACP_CAT_K_MODULES_MANAGE'		=> 'Portal Mini Modules',
	'ACP_CAT_K_TOOLS_MANAGE'		=> 'Portal Tools & other Mods',

	'ACP_CAT_K_WEB_PAGES_MANAGE'	=> 'Portal Web Pages',

	'ACP_CAT_PLUGINS'			=> 'Plugins',
	'ACP_CAT_PLUGINS_EXPLAIN'	=> 'Stargate Portal Plug-ins Mod Manager',

	'ACP_PLUGINS'				=> 'Plugins',
	'ACP_PLUGIN_VARIABLES'		=> 'Configure Defaults',
	'ACP_PLUGIN_CONFIG'			=> 'Configure Plugin Defaults',

	'ACP_PLUGIN_MANAGE'			=> 'Manage Plugin',
	'ACP_PLUGIN_ADD'			=> 'Add New Plugin',
	'ACP_PLUGIN_EDIT'			=> 'Edit Plugin',
	'ACP_PLUGIN_DELETE'			=> 'Delete Plugin',
	'ACP_PLUGIN_UPDATE'			=> 'Update plugin',
	'ACP_PLUGIN_UP'				=> 'Move Up',
	'ACP_PLUGIN_DOWN'			=> 'Move Down',
	'AVAILABLE_FORUM_IMAGE'		=> 'Available Images',
	'AVAILABLE_FORUM_IMAGE_EXPLAIN'		=> 'Display a list of available forum images (images/forum_icons/). Hover over an image to see the path/name...',
	'SHOW_FORUM_IMAGES'					=> 'Show available forum images.',
	'ENABLE_PORTAL'				=> 'Enable Portal',
));
// phpbbportal profile fields


// Mike
$lang = array_merge($lang, array(
	'MOD_IMAGES'	=> 'The image mod allows the admin to select images for editing where images are stored in the Admins current style.',
	'MOD_ICONS'		=> 'The image mod allows the admin to select icons for editing where icons are stored in the Admins current style.',
	'VARS_FOUND'	=> 'Editing config for',
	'EDITOR_NAME'	=> 'SGP Simple edit',
	'SMILIES'		=> 'Basic Smilies',
	'SHOW_VARS'		=> 'Add this variable',
	'VARIABLES'		=> 'Variables',
));

// Errors
$lang = array_merge($lang, array(
	'ERROR_PORTAL_MODULE'			=> 'Error! Could not query portal modules information: ',
	'ERROR_PORTAL_ANNOUNCE'			=> 'Error! Could not query announcements information',
	'ERROR_PORTAL_BLOCKS'			=> 'Error! Could not query <strong> Blocks Table</strong>',
	'ERROR_PORTAL_NEWS'				=> 'Error! Could not query news data',
	'ERROR_PORTAL_RECENT_TOPICS'	=> 'ERROR! Could not query recent topics data',
	'ERROR_PORTAL_FORUMS'			=> 'Error! Could not query forums information',

	'WARNINGIMG_DIR'				=> 'Check to see if you added the image directory!',
	
));

// phpBB pages (k_pages)
$lang = array_merge($lang, array(
	'ACP_K_PAGES_MANAGE'	=> 'Manage phpBB pages',
	'ADD_VARS'				=> 'Manage variables',
));


// phpBB common to sgp //
$lang = array_merge($lang, array(
	'ACTION_CANCELLED'		=> 'Action Cancelled',
	'ADDED'					=> 'Data added...',
	'ADDING_MODULES'		=> 'Adding modules...',
	'BLOCK_ADDED'			=> 'Block added',
	'BLOCK_DELETED'			=> 'Block deleted', 
	'DATA_IS_BEING_SAVED'	=> 'Data is being saved...', 
	'DELETED'				=> 'Deleted... ',
	'DELEING'				=> 'Deleting... ', 
	'FOUND'					=> '<strong>Found:</strong> ',
	'FUTURE_DEVELOPMENT'	=> 'Planned for future development',
	'MANAGE'				=> 'Manage',
	'MENU_CREATED'			=> 'Menu created...',
	'NONE'					=> 'none',
	'NOT_ASSIGNED'			=> 'Not assigned',
	'PROCESSING'			=> 'Processing...',
	'SAVING_DATA'			=> 'Saving data please wait...',
	'SAVED'					=> 'Data saved...',

	'TOOLS'				=> 'Tools',
	'TOOLS_1'			=> 'Tools moved to independant Porgram. Contact Site Admin for details',
	'TOOLS_2'			=> 'Tools include: Block Builder, Style and CSS Builder',
 
));
]]></action>
			</edit>
		</open>
		<open src="language/en/acp/permissions_phpbb.php">
			<edit>
				<find><![CDATA[		'pm'			=> 'Private messages',]]></find>
				<action type="after-add"><![CDATA[		'portal'		=> 'Portal',]]></action>
			</edit>
			<edit>
				<find><![CDATA[	'acl_a_search'		=> array('lang' => 'Can manage search backends and settings', 'cat' => 'misc'),]]></find>
				<action type="after-add"><![CDATA[	'acl_u_k_tools'		=> array('lang' => 'Can use portal tools', 'cat' => 'portal'),
	'acl_a_k_portal'	=> array('lang' => 'Can view portal settings', 'cat' => 'portal'),
	'acl_a_k_web_pages'	=> array('lang' => 'Can manage portal web pages', 'cat' => 'portal'),
	'acl_a_k_tools'		=> array('lang' => 'Can manage portal tools', 'cat' => 'portal'),
]]></action>
			</edit>
		</open>
		<open src="language/en/acp/styles.php">
			<edit>
				<find><![CDATA[	'IMG_USER_ICON10'		=> 'User defined image 10',]]></find>
				<action type="after-add"><![CDATA[	'IMG_NEWS_READ'					=> 'News',
	'IMG_NEWS_READ_MINE'			=> 'News posted to',
	'IMG_NEWS_READ_LOCKED'			=> 'News locked',
	'IMG_NEWS_READ_LOCKED_MINE'		=> 'News locked posted to',
	'IMG_NEWS_UNREAD'				=> 'News new posts',
	'IMG_NEWS_UNREAD_MINE'			=> 'News posted to new',
	'IMG_NEWS_UNREAD_LOCKED'		=> 'News locked new post',
	'IMG_NEWS_UNREAD_LOCKED_MINE'	=> 'News locked posted to new',]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/imageset/imageset.cfg">
			<edit>
				<find><![CDATA[img_poll_left =
img_poll_center =
img_poll_right = ]]></find>
				<action type="replace-with"><![CDATA[img_poll_left = poll_left.gif*12*4
img_poll_center = poll_center.gif*12*
img_poll_right = poll_right.gif*12*4]]></action>
			</edit>
			<edit>
				<find><![CDATA[img_icon_user_warn = icon_user_warn.gif*20*20]]></find>
				<action type="after-add"><![CDATA[img_news_read				= news_read.gif*27*27
img_news_read_mine			= news_read_mine.gif*27*27
img_news_read_locked		= news_read_locked.gif*27*27
img_news_read_locked_mine	= news_read_locked_mine.gif*27*27
img_news_unread				= news_unread.gif*27*27
img_news_unread_mine		= news_unread_mine.gif*27*27
img_news_unread_locked		= news_unread_locked.gif*27*27
img_news_unread_locked_mine	= news_unread_locked_mine.gif*27*27]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/attachment.html">
			<edit>
				<comment lang="en"><![CDATA[Line ~7]]></comment>
				<find><![CDATA[		<!-- IF _file.S_THUMBNAIL -->
		<dl class="thumbnail">
			<dt><a href="{_file.U_DOWNLOAD_LINK}"><img src="{_file.THUMB_IMAGE}" alt="{_file.DOWNLOAD_NAME}" title="{_file.DOWNLOAD_NAME} ({_file.FILESIZE} {_file.SIZE_LANG}) {_file.L_DOWNLOAD_COUNT}" /></a></dt>
			<!-- IF _file.COMMENT --><dd> {_file.COMMENT}</dd><!-- ENDIF -->
		</dl>
		<!-- ENDIF -->]]></find>
				<action type="replace-with"><![CDATA[		<!-- IF _file.S_THUMBNAIL -->
		<div class="highslide-gallery">
		<dl class="thumbnail">
			<dt>
				<a href="{_file.U_DOWNLOAD_LINK}/{_file.DOWNLOAD_NAME}" class="highslide" onclick="return hs.expand(this)"><img src="{_file.THUMB_IMAGE}" alt="{_file.DOWNLOAD_NAME}" title="{L_CLICK_TO_ENLARGE}" /></a>
				<div class="highslide-caption">{_file.DOWNLOAD_NAME} ({_file.FILESIZE} {_file.SIZE_LANG})</div>
			</dt>
			<!-- IF _file.COMMENT --><dd> {_file.COMMENT}</dd><!-- ENDIF -->
		</dl>
		</div>
		<dl class="file">
			<dd>{_file.DOWNLOAD_NAME} ({_file.FILESIZE} {_file.SIZE_LANG}) {_file.L_DOWNLOAD_COUNT}</dd>
		</dl>
		<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/index_body.html">
			<edit>
				<comment lang="en"><![CDATA[line ~15]]></comment>
				<find><![CDATA[<!-- INCLUDE forumlist_body.html -->]]></find>
				<action type="replace-with"><![CDATA[<!-- IF STARGATE -->
	<!-- INCLUDE portal_center.html -->
<!-- ENDIF -->

<!-- INCLUDE forumlist_body.html -->

<!-- IF STARGATE -->
	<!-- IF S_DISPLAY_ONLINE_LIST -->
		<!-- INCLUDE blocks/block_whos_on_line.html -->
	<!-- ENDIF -->
	<!-- IF S_DISPLAY_BIRTHDAY_LIST -->
		<!-- INCLUDE blocks/block_birthday.html -->
	<!-- ENDIF -->
	<!-- IF NEWEST_USER -->
		<!-- INCLUDE blocks/block_stats.html -->
	<!-- ENDIF -->
<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~32]]></comment>
				<find><![CDATA[<!-- IF S_DISPLAY_ONLINE_LIST -->
	<!-- IF U_VIEWONLINE --><h3><a href="{U_VIEWONLINE}">{L_WHO_IS_ONLINE}</a></h3><!-- ELSE --><h3>{L_WHO_IS_ONLINE}</h3><!-- ENDIF -->]]></find>
				<action type="before-add"><![CDATA[<!-- IF !STARGATE -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[line ~45]]></comment>
				<find><![CDATA[	<p>{TOTAL_POSTS} &bull; {TOTAL_TOPICS} &bull; {TOTAL_USERS} &bull; {NEWEST_USER}</p>
<!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/memberlist_search.html">
			<edit>
				<find><![CDATA[<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/forum_fn.js"></script>]]></find>
				<action type="replace-with"><![CDATA[<script type="text/javascript" src="{ROOT_PATH}js/forum_fn.js"></script>]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/overall_footer.html">
			<edit>
				<find><![CDATA[<div id="page-footer">]]></find>
				<action type="before-add"><![CDATA[<!-- IF STARGATE --><!-- INCLUDE portal_tail.html --><!-- ENDIF -->
]]></action>
			</edit>
			<edit>
				<find><![CDATA[			<li class="icon-home"><a href="{U_INDEX}" accesskey="h">{L_INDEX}</a></li>
]]></find>
				<action type="replace-with"><![CDATA[			<li class="icon-home"><!-- IF STARGATE --><a href="{U_PORTAL}">{L_PORTAL}</a> &bull; <!-- ENDIF --><a href="{U_INDEX}" accesskey="h">{L_INDEX}</a></li>
]]></action>
			</edit>
			<edit>
				<find><![CDATA[<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group]]></find>
				<action type="after-add"><![CDATA[		<!-- IF STARGATE --><!-- INCLUDE portal_footer_pre.html --><!-- ENDIF -->
		<!-- IF STARGATE --><!-- INCLUDE portal_footer.html --><!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[</body>
</html>]]></find>
				<action type="before-add"><![CDATA[<!-- IF STARGATE-->
	<!-- IF RAND_BANNER_POSITION == 2 or RAND_BANNER_POSITION == 3 --><div align="center">{RAND_BANNER}</div><!-- ENDIF -->
</div>
<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<comment lang="en"><![CDATA[Line ~16]]></comment>
				<find><![CDATA[<title>{SITENAME} &bull; <!-- IF S_IN_MCP -->{L_MCP} &bull; <!-- ELSEIF S_IN_UCP -->{L_UCP} &bull; <!-- ENDIF -->{PAGE_TITLE}</title>]]></find>
				<action type="after-add"><![CDATA[<link rel="stylesheet" type="text/css" href="{T_THEME_PATH}/style_wide.css" />
<link rel="alternate stylesheet" type="text/css" media="screen" title="fixed" href="{T_THEME_PATH}/style_fixed.css" />]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~88]]></comment>
				<find><![CDATA[<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/styleswitcher.js"></script>
<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/forum_fn.js"></script>]]></find>
				<action type="replace-with"><![CDATA[<script type="text/javascript" src="{ROOT_PATH}js/styleswitcher.js"></script>
<script type="text/javascript" src="{ROOT_PATH}js/forum_fn.js"></script>]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~102]]></comment>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<!-- IF STARGATE --><!-- INCLUDE portal_header.html --><!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~104]]></comment>
				<find><![CDATA[<body id="phpbb" class="section-{SCRIPT_NAME} {S_CONTENT_DIRECTION}">]]></find>
				<action type="after-add"><![CDATA[<!-- IF STARGATE --><div class="stylewidth"><!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~113]]></comment>
				<find><![CDATA[				<a href="{U_INDEX}" title="{L_INDEX}" id="logo">{SITE_LOGO_IMG}</a>
]]></find>
				<action type="replace-with"><![CDATA[				<!-- IF STARGATE -->
					<a href="{U_PORTAL}" title="{L_PORTAL}" id="logo">{SITE_LOGO_IMG}</a>
				<!-- ELSE -->
					<a href="{U_INDEX}" title="{L_INDEX}" id="logo">{SITE_LOGO_IMG}</a>
				<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~138]]></comment>
				<find><![CDATA[				<li class="icon-home"><a href="{U_INDEX}" accesskey="h">{L_INDEX}</a> <!-- BEGIN navlinks --> <strong>&#8249;</strong> <a href="{navlinks.U_VIEW_FORUM}">{navlinks.FORUM_NAME}</a><!-- END navlinks --></li>
]]></find>
				<action type="replace-with"><![CDATA[			<!-- IF STARGATE -->
				<li class="icon-home"><a href="{U_PORTAL}" accesskey="h">{L_PORTAL}</a> &bull; <a href="{U_INDEX}" accesskey="h">{L_INDEX}</a><!-- BEGIN navlinks --> <strong>&#8249;</strong> <a href="{navlinks.U_VIEW_FORUM}">{navlinks.FORUM_NAME}</a><!-- END navlinks --></li>
			<!-- ELSE -->
				<li class="icon-home"><a href="{U_INDEX}" accesskey="h">{L_INDEX}</a> <!-- BEGIN navlinks --> <strong>&#8249;</strong> <a href="{navlinks.U_VIEW_FORUM}">{navlinks.FORUM_NAME}</a><!-- END navlinks --></li>
			<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~140]]></comment>
				<find><![CDATA[				<li class="rightside"><a href="#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="{L_CHANGE_FONT_SIZE}">{L_CHANGE_FONT_SIZE}</a></li>]]></find>
				<action type="after-add"><![CDATA[				<!-- IF STARGATE -->
					<li class="rightside">
						<!-- IF S_ARRANGE -->
						<span style="display:inline;" id="_OFF">
							<a href="javascript:chooseStyle('none', 60)" style="float:left" checked="checked"><img src="{T_THEME_PATH}/images/wide.gif" width="14" height="14" alt="{L_WIDE}" title="{L_WIDE}" /></a>
							<a href="javascript:chooseStyle('fixed', 60)" style="float:left"><img src="{T_THEME_PATH}/images/narrow.gif" width="11" height="14" alt="{L_NARROW}" title="{L_NARROW}" /></a>
							<a href="{U_PORTAL}" class="arrange_off" onclick="ShowHide('_ON'); ShowHide('_OFF'); " style="float:left" title="{L_ARRANGE_OFF}">{L_ARRANGE_OFF}</a>
						</span>
						<!-- ELSE -->
						<span style="display:inline;" id="_ON">
							<a href="{U_PORTAL_ARRANGE}" class="arrange_on"  onclick="ShowHide('_OFF'); ShowHide('_ON'); " style="float:left" title="{L_ARRANGE_ON}">{L_ARRANGE_ON}</a>
						</span>
						<!-- ENDIF -->
					</li>
				<!-- ENDIF -->
]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~179]]></comment>
				<find><![CDATA[		<!-- IF S_BOARD_DISABLED and S_USER_LOGGED_IN and (U_MCP or U_ACP) -->
		<div id="information" class="rules">
			<div class="inner"><span class="corners-top"><span></span></span>
				<strong>{L_INFORMATION}:</strong> {L_BOARD_DISABLED}
			<span class="corners-bottom"><span></span></span></div>
		</div>
		<!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[		<!-- IF STARGATE -->
			<!-- IF RAND_BANNER_POSITION == 1 or RAND_BANNER_POSITION == 3 --><div align="center">{RAND_BANNER}</div><!-- ENDIF -->
			<!-- INCLUDE portal_head.html -->
		<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/posting_buttons.html">
			<edit>
				<find><![CDATA[<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/editor.js"></script>]]></find>
				<action type="replace-with"><![CDATA[<script type="text/javascript" src="{ROOT_PATH}js/editor.js"></script>
]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/posting_smilies.html">
			<edit>
				<find><![CDATA[<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/editor.js"></script>]]></find>
				<action type="replace-with"><![CDATA[<script type="text/javascript" src="{ROOT_PATH}js/editor.js"></script>
]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/search_results.html">
			<edit>
				<comment lang="en"/>
				<find><![CDATA[						<a href="{searchresults.U_VIEW_TOPIC}" class="topictitle">{searchresults.TOPIC_TITLE}</a> {searchresults.ATTACH_ICON_IMG}]]></find>
				<inline-edit>
					<inline-find><![CDATA[{searchresults.U_VIEW_TOPIC}"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ title="{searchresults.TOOLTIP}"]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="styles/prosilver/template/simple_header.html">
			<edit>
				<find><![CDATA[<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/styleswitcher.js"></script>
<script type="text/javascript" src="{T_SUPER_TEMPLATE_PATH}/forum_fn.js"></script>]]></find>
				<action type="replace-with"><![CDATA[<script type="text/javascript" src="{ROOT_PATH}js/styleswitcher.js"></script>
<script type="text/javascript" src="{ROOT_PATH}js/forum_fn.js"></script>]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/viewforum_body.html">
			<edit>
				<comment lang="en"><![CDATA[Line ~129]]></comment>
				<find><![CDATA[					<dt><!-- IF S_DISPLAY_ACTIVE -->{L_ACTIVE_TOPICS}<!-- ELSEIF topicrow.S_TOPIC_TYPE_SWITCH and (topicrow.S_POST_ANNOUNCE or topicrow.S_POST_GLOBAL) -->{L_ANNOUNCEMENTS}<!-- ELSE -->{L_TOPICS}<!-- ENDIF --></dt>]]></find>
				<action type="replace-with"><![CDATA[					<dt><!-- IF S_DISPLAY_ACTIVE -->{L_ACTIVE_TOPICS}<!-- ELSEIF topicrow.S_TOPIC_TYPE_SWITCH and (topicrow.S_POST_ANNOUNCE or topicrow.S_POST_GLOBAL or topicrow.S_POST_NEWS or topicrow.S_POST_NEWS_GLOBAL) -->{L_ANNOUNCEMENTS_AND_NEWS}<!-- ELSE -->{L_TOPICS}<!-- ENDIF --></dt>]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~141]]></comment>
				<find><![CDATA[				<dt<!-- IF topicrow.TOPIC_ICON_IMG and S_TOPIC_ICONS --> style="background-image: url({T_ICONS_PATH}{topicrow.TOPIC_ICON_IMG}); background-repeat: no-repeat;"<!-- ENDIF --> title="{topicrow.TOPIC_FOLDER_IMG_ALT}"><!-- IF topicrow.S_UNREAD_TOPIC --><a href="{topicrow.U_NEWEST_POST}">{NEWEST_POST_IMG}</a> <!-- ENDIF --><a href="{topicrow.U_VIEW_TOPIC}" class="topictitle">{topicrow.TOPIC_TITLE}</a>]]></find>
				<inline-edit>
					<inline-find><![CDATA[<a href="{topicrow.U_VIEW_TOPIC}"]]></inline-find>
					<inline-action type="after-add"><![CDATA[ <!-- IF STARGATE -->title="{topicrow.TOOLTIP}"<!-- ENDIF --> ]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="styles/prosilver/template/viewtopic_body.html">
			<edit>
				<comment lang="en"><![CDATA[Line ~226]]></comment>
				<find><![CDATA[<!-- IF S_QUICK_REPLY -->
	<!-- INCLUDE quickreply_editor.html -->
<!-- ENDIF -->]]></find>
				<action type="replace-with"><![CDATA[<!-- IF S_QUICK_REPLY and not STARGATE -->
	<!-- INCLUDE quickreply_editor.html -->
<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~243]]></comment>
				<find><![CDATA[<!-- ENDIF -->

<div class="topic-actions">
	<div class="buttons">
	<!-- IF not S_IS_BOT and S_DISPLAY_REPLY_INFO -->
		<div class="<!-- IF S_IS_LOCKED -->locked-icon<!-- ELSE -->reply-icon<!-- ENDIF -->"><a href="{U_POST_REPLY_TOPIC}" title="<!-- IF S_IS_LOCKED -->{L_TOPIC_LOCKED}<!-- ELSE -->{L_POST_REPLY}<!-- ENDIF -->"><span></span><!-- IF S_IS_LOCKED -->{L_TOPIC_LOCKED_SHORT}<!-- ELSE -->{L_POST_REPLY}<!-- ENDIF --></a></div>
	<!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[	<!-- IF STARGATE and S_QUICK_REPLY and S_SGP_QUICK_REPLY -->
			<!-- IF not S_IS_BOT and S_DISPLAY_REPLY_INFO and not S_IS_LOCKED -->
				<a class="qreply-icon fast-reply" href="javascript:void(0);" title="{L_QUICK_REPLY}"><span>{L_QUICK_REPLY}</span></a>
			<!-- ENDIF -->
	<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<comment lang="en"><![CDATA[Line ~252]]></comment>
				<find><![CDATA[	<!-- IF PAGINATION or TOTAL_POSTS -->
		<div class="pagination">
			{TOTAL_POSTS}
			<!-- IF PAGE_NUMBER --><!-- IF PAGINATION --> &bull; <a href="#" onclick="jumpto(); return false;" title="{L_JUMP_TO_PAGE}">{PAGE_NUMBER}</a> &bull; <span>{PAGINATION}</span><!-- ELSE --> &bull; {PAGE_NUMBER}<!-- ENDIF --><!-- ENDIF -->
		</div>
	<!-- ENDIF -->
</div>]]></find>
				<action type="after-add"><![CDATA[<!-- IF STARGATE and S_QUICK_REPLY -->
	<!-- IF S_QUICK_REPLY and S_SGP_QUICK_REPLY -->
		<!-- INCLUDE sgp_quickreply_editor.html -->
	<!-- ENDIF -->
<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/theme/stylesheet.css">
			<edit>
				<find><![CDATA[@import url("colours.css");]]></find>
				<action type="after-add"><![CDATA[@import url("profile_on_left.css");
]]></action>
			</edit>
		</open>
		<php-installer><![CDATA[portal/index.php]]></php-installer>
		<diy-instructions lang="en"><![CDATA[Point your browser to: your_site/portal/ and follow the onscreen instructions...
Note! If you browse to root (index) at this point you will receive a template error... Ignore it and browse to: your_site/portal/

Go to ACP > PERMISSIONS > Admin roles > Full Admin.... 
Click Portal Tab, set all options to yes... Set others permissions as desired...

Refresh prosilver Templates/Themes/Imagesets...
Refresh subsilver 2 Templates/Themes/Imagesets if you completed the subsilver 2 installation...

Purge the cache...

Enable 'Create Thumbnail' to take advantage of highslide...
Delete or rename the portal directory...]]></diy-instructions>
	</action-group>
</mod>
